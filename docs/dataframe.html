<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>12 . 데이터프레임 | 데이터 과학 프로그래밍</title>
<meta name="author" content="한국 알(R) 사용자회">
<meta name="description" content="다른 프로그래밍 언어에서 다루지 않는 독특한 자료구조가 데이터프레임(Dataframe)이다. R도 프로그래밍 언어이기 때문에 다른 언어에서 갖고 있는 자료구조를 대부분 갖추고 있지만, 데이터분석, 시각화, 모형개발 등에 꼭 필요한 기본 자료구조가 데이터프레임이다. 데이터프레임을 본격적으로 살펴보기 전에 통계학에서 다루는 측정에 대해 살펴보고, 측정...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="12 . 데이터프레임 | 데이터 과학 프로그래밍">
<meta property="og:type" content="book">
<meta property="og:description" content="다른 프로그래밍 언어에서 다루지 않는 독특한 자료구조가 데이터프레임(Dataframe)이다. R도 프로그래밍 언어이기 때문에 다른 언어에서 갖고 있는 자료구조를 대부분 갖추고 있지만, 데이터분석, 시각화, 모형개발 등에 꼭 필요한 기본 자료구조가 데이터프레임이다. 데이터프레임을 본격적으로 살펴보기 전에 통계학에서 다루는 측정에 대해 살펴보고, 측정...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="12 . 데이터프레임 | 데이터 과학 프로그래밍">
<meta name="twitter:description" content="다른 프로그래밍 언어에서 다루지 않는 독특한 자료구조가 데이터프레임(Dataframe)이다. R도 프로그래밍 언어이기 때문에 다른 언어에서 갖고 있는 자료구조를 대부분 갖추고 있지만, 데이터분석, 시각화, 모형개발 등에 꼭 필요한 기본 자료구조가 데이터프레임이다. 데이터프레임을 본격적으로 살펴보기 전에 통계학에서 다루는 측정에 대해 살펴보고, 측정...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-229551680-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-229551680-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">데이터 과학 프로그래밍</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">기계와의 경쟁 1</a></li>
<li class="book-part">들어가며</li>
<li><a class="" href="r-vs-python.html"><span class="header-section-number">1</span> R vs 파이썬</a></li>
<li><a class="" href="r-intro.html"><span class="header-section-number">2</span> 프로그래밍 학습 이유</a></li>
<li class="book-part">프로그래밍</li>
<li><a class="" href="r-var.html"><span class="header-section-number">3</span> 변수, 표현식, 문장</a></li>
<li><a class="" href="r-cont.html"><span class="header-section-number">4</span> 조건부 실행</a></li>
<li><a class="" href="r-func.html"><span class="header-section-number">5</span> 함수</a></li>
<li><a class="" href="r-iter.html"><span class="header-section-number">6</span> 반복(Iteration)</a></li>
<li class="book-part">자료구조</li>
<li><a class="" href="r-string.html"><span class="header-section-number">7</span> 문자열</a></li>
<li><a class="" href="r-file.html"><span class="header-section-number">8</span> 파일</a></li>
<li><a class="" href="r-list.html"><span class="header-section-number">9</span> 리스트 (List)</a></li>
<li><a class="" href="named-list.html"><span class="header-section-number">10</span> 딕셔너리</a></li>
<li><a class="" href="r-tuple.html"><span class="header-section-number">11</span> 튜플(Tuples)</a></li>
<li><a class="active" href="dataframe.html"><span class="header-section-number">12</span> 데이터프레임</a></li>
<li class="book-part">분야별 도구</li>
<li><a class="" href="regex.html"><span class="header-section-number">13</span> 정규 표현식</a></li>
<li><a class="" href="network.html"><span class="header-section-number">14</span> 네트워크 프로그램</a></li>
<li><a class="" href="r-webservice.html"><span class="header-section-number">15</span> 웹서비스 사용하기</a></li>
<li><a class="" href="r-db.html"><span class="header-section-number">16</span> 데이터베이스와 SQL</a></li>
<li><a class="" href="r-automation.html"><span class="header-section-number">17</span> 작업 자동화</a></li>
<li><a class="" href="r-functional-programming.html"><span class="header-section-number">18</span> 함수형 프로그래밍</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="dataframe" class="section level1" number="12">
<h1>
<span class="header-section-number">12 . </span> 데이터프레임<a class="anchor" aria-label="anchor" href="#dataframe"><i class="fas fa-link"></i></a>
</h1>
<p>다른 프로그래밍 언어에서 다루지 않는 독특한 자료구조가 데이터프레임(Dataframe)이다.
R도 프로그래밍 언어이기 때문에 다른 언어에서 갖고 있는 자료구조를 대부분 갖추고 있지만,
데이터분석, 시각화, 모형개발 등에 꼭 필요한 기본 자료구조가 데이터프레임이다.
데이터프레임을 본격적으로 살펴보기 전에 통계학에서 다루는 측정에 대해 살펴보고,
측정 척도(scale)에 대한 이론적 배경을 이해한다.
척도의 개념에 대응되는 R 자료구조를 통해 데이터프레임과 추후 프로그래밍 과정에서
많이 다뤄지는 리스트에 대한 차별점도 살펴보자.</p>
<div id="data-type-for-data-science" class="section level2" number="12.1">
<h2>
<span class="header-section-number">12.1</span> 측정 변수의 구분 <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="http://psychology.okstate.edu/faculty/jgrice/psyc3214/Stevens_FourScales_1946.pdf"&gt;Stevens, Stanley Smith. “On the theory of scales of measurement.” (1946).&lt;/a&gt;&lt;/p&gt;'><sup>10</sup></a> <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Wiener, Norbert. “A new theory of measurement: a study in the logic of mathematics.” Proceedings of the London Mathematical Society 2.1 (1921): 181-205.&lt;/p&gt;"><sup>11</sup></a> <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;이경화 외 (2020), “고등학교 실용통계”, 통계청 통계교육원&lt;/p&gt;"><sup>12</sup></a><a class="anchor" aria-label="anchor" href="#data-type-for-data-science"><i class="fas fa-link"></i></a>
</h2>
<p>자료가 갖는 고유한 특성을 숫자료 표현한 측정 척도에 따라, 명목형, 순서형, 구간형, 비율형 네가지로 구분된다.
측정 척도에 따라 유의미한 통계량도 함께 정해진다. 자세한 사항은 <a href="http://psychology.okstate.edu/faculty/jgrice/psyc3214/Stevens_FourScales_1946.pdf">Stevens, Stanley Smith. “On the theory of scales of measurement.” (1946).</a> 논문을 참조한다.</p>
<ul>
<li>명목척도(Nominal): 단순히 개체 특성 분류를 위해 숫자나 부호를 부여한 척도로 숫자는 의미가 없음.
<ul>
<li>남자: M, 여자: F 혹은 월: 1, 화: 2, … 일:7 혹은 갑:1, 을:2, 병:3, …</li>
</ul>
</li>
<li>서열척도(Ordinal): 명목척도에 부가적으로 “순서(서열)” 정보가 추가된 척도로 측정대상 간 차이는 정보가 없음.
<ul>
<li>군대계급: 사병, 장교, 장군 등</li>
<li>소득계층: 1분위, 2분위, 3분위 등</li>
</ul>
</li>
<li>등간척도(Interval): 서열척도에 부가적으로 “등간격” 정보가 추가된 척도
<ul>
<li>온도에서 0도는 상대적인 위치로 수학에서 다루는 개념과 차이가 있음.</li>
<li>온도가 서울 10도, 제주 20도는 제주가 서울보다 온도가 2배 높지 않음.</li>
<li>온도, 시력, IQ 지수, 물가지수 등</li>
</ul>
</li>
<li>비율척도(Ratio): 구간척도에 “비율” 비교특성이 추가된 척도로 “비율 등간격” 특성이 포함됨.
<ul>
<li>키나 몸무게에서 0은 수학적 의미 0을 의미함.</li>
<li>100m는 200m의 절반 의미.</li>
<li>절대 ’0’을 가지고 사칙연산이 가능함.</li>
<li>연령, 월소득, TV 시청률 등.</li>
</ul>
</li>
</ul>
</div>
<div id="data-type-basics" class="section level2" number="12.2">
<h2>
<span class="header-section-number">12.2</span> 자료구조 기본<a class="anchor" aria-label="anchor" href="#data-type-basics"><i class="fas fa-link"></i></a>
</h2>
<p>R에서 기본으로 사용하는 벡터 자료형은 <strong>원자 벡터(Atomic Vector)</strong> 와 <strong>리스트(List)</strong> 로 나눠진다.
원자 벡터에는 6가지 자료형이 있고, logical, integer, double, character, complex, raw, 총 6 개가 있으며
주로, 논리형, 정수형, 부동소수점형, 문자형, 4가지를 많이 사용한다. 리스트는 재귀 벡터(recursive vector)라고도
불리는데 리스트는 다른 리스트를 포함할 수 있기 때문이다. <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="http://r4ds.had.co.nz/"&gt;Garrett Grolemund &amp;amp; Hadley Wickham, R for Data Science&lt;/a&gt;&lt;/p&gt;'><sup>13</sup></a></p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>자료형(Type)</th>
<th>모드(Mode)</th>
<th>저장모드(Storage Mode)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>logical</td>
<td>logical</td>
<td>logical</td>
</tr>
<tr class="even">
<td><strong>integer</strong></td>
<td>numeric</td>
<td>integer</td>
</tr>
<tr class="odd">
<td><strong>double</strong></td>
<td>numeric</td>
<td>double</td>
</tr>
<tr class="even">
<td>complex</td>
<td>complex</td>
<td>complex</td>
</tr>
<tr class="odd">
<td>character</td>
<td>character</td>
<td>character</td>
</tr>
<tr class="even">
<td>raw</td>
<td>raw</td>
<td>raw</td>
</tr>
</tbody>
</table></div>
<p>따라서, 원자벡터는 동질적(homogeneous)이고, 리스트는 상대적으로 이질적(heterogeneous)이다.</p>
<p>모든 벡터는 두가지 성질(Property)을 갖는데, 자료형과 길이로 이를 확인하는데 <code><a href="https://rdrr.io/r/base/typeof.html">typeof()</a></code>와 <code><a href="https://rdrr.io/r/base/length.html">length()</a></code> 함수를 사용해서 확인한다.</p>
<div class="sourceCode" id="cb480"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>

<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,
            b <span class="op">=</span> <span class="st">"a string"</span>,
            c <span class="op">=</span> <span class="va">pi</span>,
            d <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span> <span class="op">)</span>
  
<span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "list"</code></pre>
<div class="sourceCode" id="cb482"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>  </code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>모드 함수는 객체의 <strong>모드</strong>를 반환하고, 클래스 함수는 <strong>클래스</strong>를 반환한다.
가장 흔하게 만나는 객체 모드는 숫자, 문자, 논리 모드다.
때때로 리스트와 데이터프레임과 같이 하나의 객체안에 여러 모드를 포함하기도 한다.<br>
리스트(List)는 데이터를 저장하는 유연하며 강력한 방법으로 과거 리스트 자료구조를 처리하는 <code>sapply</code> 함수와 함께 가장 빈번하게 사용되는 자료형이다. 현재는 <code>purrr</code> 팩키지 <code>map_*()</code>함수를 사용한다.
리스트형 자료 <code>a</code>를 세가지 숫자형, 문자형, 숫자형, 리스트 네가지 자료형을 포함하게 작성한다.
<code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code>, <code><a href="https://purrr.tidyverse.org/reference/map.html">map_chr()</a></code> 함수를 이용하여 <code>mode</code>와 <code>class</code> 인자를 넣어줌으로써, 각각 자료형의 모드와 자료형을 확인한다.</p>
<div class="sourceCode" id="cb484"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">mode</span><span class="op">)</span>   <span class="co"># sapply(a, mode)</span></code></pre></div>
<pre><code>##           a           b           c           d 
##   "numeric" "character"   "numeric"      "list"</code></pre>
<div class="sourceCode" id="cb486"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_chr</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">class</span><span class="op">)</span>  <span class="co"># sapply(a, class)</span></code></pre></div>
<pre><code>##           a           b           c           d 
##   "integer" "character"   "numeric"      "list"</code></pre>
<p>리스트에서 원소를 뽑아내는 의미를 살펴보자. 시각적으로 표현하면 다음과 같다.
리스트는 이질적인 객체를 담을 수 있다는 점에서 동질적인 것만 담을 수 있어 한계가 있는 원자벡터보다 쓰임새가 다르다.
회귀분석 결과 산출되는 <code>lm</code> 결과값은 다양한 정보를 담을 수 있는 리스트로 표현된다.</p>
<ul>
<li>리스트 생성 : <code><a href="https://rdrr.io/r/base/list.html">list()</a></code>
</li>
<li>하위 리스트 추출 : <code>[</code>
</li>
<li>리스트에 담긴 원소값 추출 : <code>[[</code>, <code>$</code> → 연산작업을 통해 위계를 갖는 구조를 제거한다.</li>
</ul>
<div class="row">
<div class="col-md-6">
<p><strong>리스트 원소 1개</strong></p>
<div class="sourceCode" id="cb488"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">a</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>## List of 1
##  $ d:List of 2
##   ..$ : num -1
##   ..$ : num -5</code></pre>
</div>
<div class="col-md-6">
<p><strong>리스트 원소 2개</strong></p>
<div class="sourceCode" id="cb490"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">a</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>## List of 2
##  $ : num -1
##  $ : num -5</code></pre>
</div>
</div>
<div class="figure">
<img src="assets/images/ds-fp-list.png" style="width:100.0%" alt=""><p class="caption">리스트에서 하위 리스트 뽑아내기 - 출처: 해들리 위컴</p>
</div>
<p>범주형 자료를 R에 저장하기 위해서 요인(Factor) 클래스를 사용하며 요인 클래스를 사용하여 자료를 저장할 경우 저장공간을 절약할 수 있다.
요인은 내부적으로 숫자(value)로 저장을 하고 레이블(value label)을 사용하여 표시하여 저장공간을 절약한다.</p>
<div id="dataframe-type" class="rmdcaution">
<p><strong>자료형 확인</strong></p>
<p>각각의 데이터 형식에 맞는지를 다양한 테스트 함수(<code>is.</code>)를 이용하여 데이터 형식을 확인할 수 있다.</p>
<ul>
<li>
<code>is.list</code> : 리스트 형식인 확인</li>
<li>
<code>is.factor</code> : 팩터 형식인지 확인</li>
<li>
<code>is.numeric</code> : 숫자형인지 확인</li>
<li>
<code>is.data.frame</code> : 데이터 프레임형인지 확인</li>
<li>
<code>is.character</code> : 문자형인지 확인</li>
</ul>
</div>
</div>
<div id="extended-data-type" class="section level2" number="12.3">
<h2>
<span class="header-section-number">12.3</span> 자료형 확장<a class="anchor" aria-label="anchor" href="#extended-data-type"><i class="fas fa-link"></i></a>
</h2>
<p>요인, 텍스트, 날짜와 시간도 중요한 R에서 자주 사용되는 중요한 데이터 자료형으로 별도로 다뤄진다.
이를 위해서 <code>stringr</code>, <code>lubridate</code>, <code>forcats</code> 팩키지를 사용해서 데이터 정제작업은 물론 기계학습 예측모형 개발에 활용한다.</p>
<div class="figure">
<img src="fig/data-type-in-r.png" alt=""><p class="caption">데이터 과학 중요 자료구조</p>
</div>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>R 자료형</th>
<th>자료형</th>
<th>예제</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>logical</code></td>
<td>부울</td>
<td>부도여부(Y/N), 남여</td>
</tr>
<tr class="even">
<td><code>integer</code></td>
<td>정수</td>
<td>코로나19 감염자수</td>
</tr>
<tr class="odd">
<td><code>factor</code></td>
<td>범주</td>
<td>정당, 색상</td>
</tr>
<tr class="even">
<td><code>numeric</code></td>
<td>실수</td>
<td>키, 몸무게, 주가, 환율</td>
</tr>
<tr class="odd">
<td><code>character</code></td>
<td>텍스트</td>
<td>주소, 이름, 책제목</td>
</tr>
<tr class="even">
<td><code>Date</code></td>
<td>날짜</td>
<td>생일, 투표일</td>
</tr>
</tbody>
</table></div>
</div>
<div id="data-type-vector" class="section level2" number="12.4">
<h2>
<span class="header-section-number">12.4</span> 벡터, 행렬, 배열, 데이터프레임<a class="anchor" aria-label="anchor" href="#data-type-vector"><i class="fas fa-link"></i></a>
</h2>
<p>가장 많이 사용되는 논리형, 문자형, 숫자형을 통해 자료분석 및 모형개발을 진행하게 되고, 경우에 따라서
동일한 자료형을 모은 경우 이를 행렬로 표현할 수 있고, 행렬을 모아 RGB 시각 데이터를 위한 배열(Array)로 표현한다.
데이터프레임은 서로 다른 자료형을 모아 넣은 것이다.</p>
<div class="figure">
<img src="assets/images/ds-data-structure-pictogram.png" style="width:100.0%" alt=""><p class="caption">R 자료구조 - 벡터, 행렬, 배열, 데이터프레임</p>
</div>
</div>
<div id="data-type-dataframe-in-r" class="section level2" number="12.5">
<h2>
<span class="header-section-number">12.5</span> 데이터프레임<a class="anchor" aria-label="anchor" href="#data-type-dataframe-in-r"><i class="fas fa-link"></i></a>
</h2>
<p><strong>R</strong> 은 6가지 기본 벡터로 자료를 저장하지만, 이외에 행렬(matrix), 데이터프레임(data.frame), 리스트(list) 자료구조가 있다.
하지만, 자료분석을 위해서 데이터를 데이터셋의 형태로 구성을 해야한다.
데이터셋이 중요한 이유는 자료를 분석하기 위해서 다양한 형태의 개별 자료를 통합적으로 분석하기 위해서다.
이를 위해서 리스트 자료구조로 일단 모으게 된다.
예를 들어 개인 신용분석을 위해서는 개인의 소득, 부채, 성별, 학력 등등의 숫자형, 문자형, 요인(Factor)형 등의 자료를 데이터셋에 담아야 한다.
특히 변수와-관측값 (Variable-Observation) 형식의 자료를 분석하기 위해서는 데이터프레임(<code>data.frame</code>)을 사용한다.
데이터프레임은 모든 변수에 대해서 관측값이 같은 길이를 갖도록 만들어 놓은 것이다.</p>
<div class="figure">
<img src="assets/images/data-handling-list-dataframe.png" alt=""><p class="caption">리스트와 데이터프레임</p>
</div>
<p>데이터프레임은 <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> 함수를 사용해서 생성한다.
R 객체 구조 파악을 위해서는 간단한 자료의 경우 데이터 형식을 확인할 수 있는 1–2줄 정도의 간단한 스크립트와 명령어를 통해서 확인이 가능하지만,
복잡한 데이터의 구조를 파악하기 위해서는 <code>summary</code> 함수와 <code>str</code> 함수를 통해서 확인해야 한다.</p>
<div class="sourceCode" id="cb492"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 벡터를 정의한다.</span>
<span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Mercury"</span>, <span class="st">"Venus"</span>, <span class="st">"Earth"</span>, <span class="st">"Mars"</span>, <span class="st">"Jupiter"</span>, <span class="st">"Saturn"</span>, <span class="st">"Uranus"</span>, <span class="st">"Neptune"</span><span class="op">)</span>
<span class="va">type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Terrestrial planet"</span>, <span class="st">"Terrestrial planet"</span>, <span class="st">"Terrestrial planet"</span>, 
          <span class="st">"Terrestrial planet"</span>, <span class="st">"Gas giant"</span>, <span class="st">"Gas giant"</span>, <span class="st">"Gas giant"</span>, <span class="st">"Gas giant"</span><span class="op">)</span>
<span class="va">diameter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.382</span>, <span class="fl">0.949</span>, <span class="fl">1</span>, <span class="fl">0.532</span>, <span class="fl">11.209</span>, <span class="fl">9.449</span>, <span class="fl">4.007</span>, <span class="fl">3.883</span><span class="op">)</span>
<span class="va">rotation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">58.64</span>, <span class="op">-</span><span class="fl">243.02</span>, <span class="fl">1</span>, <span class="fl">1.03</span>, <span class="fl">0.41</span>, <span class="fl">0.43</span>, <span class="op">-</span><span class="fl">0.72</span>, <span class="fl">0.67</span><span class="op">)</span>
<span class="va">rings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># 벡터를 합쳐서 데이터프레임을 생성</span>
<span class="va">planets_df</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">type</span>, <span class="va">diameter</span>, <span class="va">rotation</span>, <span class="va">rings</span><span class="op">)</span></code></pre></div>
</div>
<div id="data-type-factor" class="section level2" number="12.6">
<h2>
<span class="header-section-number">12.6</span> 명목척도, 서열척도 범주 자료형<a class="anchor" aria-label="anchor" href="#data-type-factor"><i class="fas fa-link"></i></a>
</h2>
<p>명목척도 범주형, 서열척도 범주 자료형을 생성하는 경우 주의를 기울여야 한다.
<code>factor</code> 함수를 사용해서 요인형 자료형을 생성하는데,
내부적으로 저장공간을 효율적으로 사용하고 속도를 빠르게 하는데 유용한다.
순서를 갖는 범주형의 경우 <code>factor</code> 함수 내부에 <code>levels</code> 인자를 넣어 정의하면 순서 정보가 유지된다.</p>
<div class="sourceCode" id="cb493"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 범주형 - 명목척도</span>
<span class="va">animals_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Elephant"</span>, <span class="st">"Giraffe"</span>, <span class="st">"Donkey"</span>, <span class="st">"Horse"</span><span class="op">)</span>
<span class="va">factor_animals_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">animals_vector</span><span class="op">)</span>
<span class="va">factor_animals_vector</span></code></pre></div>
<pre><code>## [1] Elephant Giraffe  Donkey   Horse   
## Levels: Donkey Elephant Giraffe Horse</code></pre>
<div class="sourceCode" id="cb495"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 범주형 - 서열 척도</span>
<span class="va">temperature_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"High"</span>, <span class="st">"Low"</span>, <span class="st">"High"</span>,<span class="st">"Low"</span>, <span class="st">"Medium"</span><span class="op">)</span>
<span class="va">factor_temperature_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">temperature_vector</span>, order <span class="op">=</span> <span class="cn">TRUE</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span><span class="op">)</span><span class="op">)</span>
<span class="va">factor_temperature_vector</span></code></pre></div>
<pre><code>## [1] High   Low    High   Low    Medium
## Levels: Low &lt; Medium &lt; High</code></pre>
<p>범주형 자료의 경우 범주가 갖는 척도 가독성을 높이기 위해 <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> 함수를 사용하기도 한다.</p>
<div class="sourceCode" id="cb497"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># "M", "F" 수준</span>
<span class="va">survey_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span><span class="op">)</span>
<span class="va">factor_survey_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">survey_vector</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">factor_survey_vector</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "F" "M"</code></pre>
<div class="sourceCode" id="cb499"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># "Female", "Male" 로 변환</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">factor_survey_vector</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">factor_survey_vector</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Female" "Male"</code></pre>
<p>통계 처리와 자료분석에 문자형 벡터와 요인 범주형 벡터를 다른 의미를 갖는 점에 유의한다.
동일한 <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> 함수지만 입력 자료형에 따라 R은 적절한 후속 작업을 자동 수행한다.</p>
<div class="sourceCode" id="cb501"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 문자형 벡터와 요인 벡터</span>
<span class="va">survey_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span><span class="op">)</span>
<span class="va">factor_survey_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">survey_vector</span><span class="op">)</span>

<span class="co"># 문자형 벡터 요약</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">survey_vector</span><span class="op">)</span></code></pre></div>
<pre><code>##    Length     Class      Mode 
##         5 character character</code></pre>
<div class="sourceCode" id="cb503"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 요인 벡터 요약</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">factor_survey_vector</span><span class="op">)</span></code></pre></div>
<pre><code>## F M 
## 2 3</code></pre>
</div>
<div id="is-na-null" class="section level2" number="12.7">
<h2>
<span class="header-section-number">12.7</span> <code>NULL</code>과 <code>NA</code> 결측값<a class="anchor" aria-label="anchor" href="#is-na-null"><i class="fas fa-link"></i></a>
</h2>
<p>결측되었다는 없다는 것을 표시하는 방법이 두가지 필요하다. 하나는 벡터가 없다는 <code>NULL</code>이고,
벡터 내부에 값이 결측되었다는 <code>NA</code> 다. <code>dataframe$variable &lt;- NULL</code> 명령문을 사용하면 데이터프레임(<code>dataframe</code>)에 변수(<code>variable</code>)를 날려보내는 효과가 있다.
예를 들어 책장이 아예 없다는 의미(<code>NULL</code>)와 책장에 책이 없다(<code>NA</code>)는 다른 개념을 지칭하고 쓰임새가 다르다.</p>
<div class="row">
<div class="col-md-6">
<p><strong><code>NULL</code></strong></p>
<div class="sourceCode" id="cb505"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># NULL 자료형과 길이</span>
<span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "NULL"</code></pre>
<div class="sourceCode" id="cb507"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
</div>
<div class="col-md-6">
<p><strong><code>NA</code></strong></p>
<div class="sourceCode" id="cb509"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># NA 자료형과 길이</span>
<span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "logical"</code></pre>
<div class="sourceCode" id="cb511"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
</div>
</div>
<p><code>NA</code>의 중요한 특징은 전염된다는 것이다. 즉, <code>NA</code>에 연산을 가하면 연산결과는 무조건 <code>NA</code>가 된다.
<code>NA</code>가 7보다 큰지, 7을 더하고 빼고, 부울 연산을 하든 <code>NA</code>와 연산결과는 무조건 <code>NA</code>가 된다.</p>
<div class="sourceCode" id="cb513"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="cn">NA</span> <span class="op">+</span> <span class="fl">7</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb515"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="cn">NA</span> <span class="op">/</span> <span class="fl">7</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb517"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="cn">NA</span> <span class="op">&gt;</span> <span class="fl">7</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb519"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">7</span> <span class="op">==</span> <span class="cn">NA</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb521"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="cn">NA</span> <span class="op">==</span> <span class="cn">NA</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
</div>
<div id="fp-list-columns" class="section level2" number="12.8">
<h2>
<span class="header-section-number">12.8</span> 리스트 칼럼 <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://jennybc.github.io/purrr-tutorial/ls13_list-columns.html"&gt;List columns&lt;/a&gt;&lt;/p&gt;'><sup>14</sup></a> <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/jennybc/lego-rstats"&gt;Photos that depict R data structures and operations via Lego&lt;/a&gt;&lt;/p&gt;'><sup>15</sup></a><a class="anchor" aria-label="anchor" href="#fp-list-columns"><i class="fas fa-link"></i></a>
</h2>
<p>레고를 통해 살펴본 R 자료구조는 계산가능한 원자 자료형(논리형, 숫자형, 요인형)으로 크게 볼 수 있다.
R에서 정수형과 부동소수점은 그다지 크게 구분을 하지 않는다. 동일 길이를 갖는 벡터를 쭉 붙여넣으면 자료구조형이
<strong>데이터프레임</strong>으로 되고, 길이가 갖지 않는 벡터를 한 곳에 모아넣은 자료구조가 <strong>리스트</strong>다.</p>
<p>데이터프레임이 굳이 모두 원자벡터만을 갖출 필요는 없다. 리스트를 데이터프레임 내부에 갖는 것도
데이터프레임인데 굳이 구별하자면 티블(<code>tibble</code>)이고, 이런 자료구조를 <strong>리스트-칼럼(list-column)</strong>이라고 부른다.</p>
<div class="figure">
<img src="assets/images/data-structure-list-column.png" style="width:100.0%" alt=""><p class="caption">리스트 칼럼</p>
</div>
<p>리스트-칼럼 자료구조가 빈번히 마주하는 경우가 흔한데… 대표적으로 다음 사례를 들 수 있다.</p>
<ul>
<li>정규표현식을 통한 텍스트 문자열 처리</li>
<li>웹 API로 추출된 JSON, XML 데이터</li>
<li>분할-적용-병합(Split-Apply-Combine) 전략</li>
</ul>
<p>데이터프레임이 티블(tibble) 형태로 되어 있으면 다음 작업을 나름 수월하게 추진할 수 있다.</p>
<ul>
<li>
<strong>들여다보기(Inspect)</strong>: 데이터프레임에 무엇이 들었는지 확인.</li>
<li>
<strong>인덱싱(Indexing)</strong>: 명칭 혹은 위치를 확인해서 필요한 원소를 추출.</li>
<li>
<strong>연산(Compute)</strong>: 리스트-칼럼에 연산 작업을 수행해서 또다른 벡터나 리스트-칼럼을 생성.</li>
<li>
<strong>간략화(Simplify)</strong>: 리스트-칼럼을 익숙한 데이터프레임으로 변환.</li>
</ul>
</div>
</div>




  <div class="chapter-nav">
<div class="prev"><a href="r-tuple.html"><span class="header-section-number">11</span> 튜플(Tuples)</a></div>
<div class="next"><a href="regex.html"><span class="header-section-number">13</span> 정규 표현식</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#dataframe"><span class="header-section-number">12</span> 데이터프레임</a></li>
<li><a class="nav-link" href="#data-type-for-data-science"><span class="header-section-number">12.1</span> 측정 변수의 구분 10 11 12</a></li>
<li><a class="nav-link" href="#data-type-basics"><span class="header-section-number">12.2</span> 자료구조 기본</a></li>
<li><a class="nav-link" href="#extended-data-type"><span class="header-section-number">12.3</span> 자료형 확장</a></li>
<li><a class="nav-link" href="#data-type-vector"><span class="header-section-number">12.4</span> 벡터, 행렬, 배열, 데이터프레임</a></li>
<li><a class="nav-link" href="#data-type-dataframe-in-r"><span class="header-section-number">12.5</span> 데이터프레임</a></li>
<li><a class="nav-link" href="#data-type-factor"><span class="header-section-number">12.6</span> 명목척도, 서열척도 범주 자료형</a></li>
<li><a class="nav-link" href="#is-na-null"><span class="header-section-number">12.7</span> NULL과 NA 결측값</a></li>
<li><a class="nav-link" href="#fp-list-columns"><span class="header-section-number">12.8</span> 리스트 칼럼 14 15</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>데이터 과학 프로그래밍</strong>" was written by 한국 알(R) 사용자회. It was last built on 2022-05-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
