<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>8 . 파일 | 데이터 과학 프로그래밍</title>
<meta name="author" content="한국 알(R) 사용자회">
<meta name="description" content="8.1 영속성(Persistence) 지금까지, 프로그램을 어떻게 작성하고 조건문, 함수, 반복을 사용하여 중앙처리장치(CPU, Central Processing Unit)에 프로그래머의 의도를 커뮤니케이션하는지 학습했다. 주기억장치(Main Memory)에 어떻게 자료구조를 생성하고 사용하는지도 배웠다. CPU와 주기억장치는 소프트웨어가 동작하고...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="8 . 파일 | 데이터 과학 프로그래밍">
<meta property="og:type" content="book">
<meta property="og:description" content="8.1 영속성(Persistence) 지금까지, 프로그램을 어떻게 작성하고 조건문, 함수, 반복을 사용하여 중앙처리장치(CPU, Central Processing Unit)에 프로그래머의 의도를 커뮤니케이션하는지 학습했다. 주기억장치(Main Memory)에 어떻게 자료구조를 생성하고 사용하는지도 배웠다. CPU와 주기억장치는 소프트웨어가 동작하고...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="8 . 파일 | 데이터 과학 프로그래밍">
<meta name="twitter:description" content="8.1 영속성(Persistence) 지금까지, 프로그램을 어떻게 작성하고 조건문, 함수, 반복을 사용하여 중앙처리장치(CPU, Central Processing Unit)에 프로그래머의 의도를 커뮤니케이션하는지 학습했다. 주기억장치(Main Memory)에 어떻게 자료구조를 생성하고 사용하는지도 배웠다. CPU와 주기억장치는 소프트웨어가 동작하고...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">데이터 과학 프로그래밍</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">기계와의 경쟁 1</a></li>
<li class="book-part">들어가며</li>
<li><a class="" href="r-vs-python.html"><span class="header-section-number">1</span> R vs 파이썬</a></li>
<li><a class="" href="r-intro.html"><span class="header-section-number">2</span> 프로그래밍 학습 이유</a></li>
<li class="book-part">프로그래밍</li>
<li><a class="" href="r-var.html"><span class="header-section-number">3</span> 변수, 표현식, 문장</a></li>
<li><a class="" href="r-cont.html"><span class="header-section-number">4</span> 조건부 실행</a></li>
<li><a class="" href="r-func.html"><span class="header-section-number">5</span> 함수</a></li>
<li><a class="" href="r-iter.html"><span class="header-section-number">6</span> 반복(Iteration)</a></li>
<li class="book-part">자료구조</li>
<li><a class="" href="r-string.html"><span class="header-section-number">7</span> 문자열</a></li>
<li><a class="active" href="r-file.html"><span class="header-section-number">8</span> 파일</a></li>
<li><a class="" href="r-list.html"><span class="header-section-number">9</span> 리스트 (List)</a></li>
<li><a class="" href="named-list.html"><span class="header-section-number">10</span> 딕셔너리</a></li>
<li><a class="" href="r-tuple.html"><span class="header-section-number">11</span> 튜플(Tuples)</a></li>
<li class="book-part">분야별 도구</li>
<li><a class="" href="regex.html"><span class="header-section-number">12</span> 정규 표현식</a></li>
<li><a class="" href="network.html"><span class="header-section-number">13</span> 네트워크 프로그램</a></li>
<li><a class="" href="r-webservice.html"><span class="header-section-number">14</span> 웹서비스 사용하기</a></li>
<li><a class="" href="r-db.html"><span class="header-section-number">15</span> 데이터베이스와 SQL</a></li>
<li><a class="" href="r-automation.html"><span class="header-section-number">16</span> 작업 자동화</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-file" class="section level1" number="8">
<h1>
<span class="header-section-number">8 . </span> 파일<a class="anchor" aria-label="anchor" href="#r-file"><i class="fas fa-link"></i></a>
</h1>
<div id="r-file-persistence" class="section level2" number="8.1">
<h2>
<span class="header-section-number">8.1</span> 영속성(Persistence)<a class="anchor" aria-label="anchor" href="#r-file-persistence"><i class="fas fa-link"></i></a>
</h2>
<p>지금까지, 프로그램을 어떻게 작성하고 조건문, 함수, 반복을 사용하여
중앙처리장치(CPU, Central Processing Unit)에 프로그래머의 의도를 커뮤니케이션하는지 학습했다.
주기억장치(Main Memory)에 어떻게 자료구조를 생성하고 사용하는지도 배웠다.
CPU와 주기억장치는 소프트웨어가 동작하고 실행되는 곳이고, 모든 “생각(thinking)”이 발생하는 장소다.</p>
<p>하지만, 앞서 하드웨어 아키텍처를 논의했던 기억을 되살린다면,
전원이 꺼지게 되면, CPU와 주기억장치에 저장된 모든 것이 지워진다.
지금까지 작성한 프로그램은 R을 배우기 위한 일시적으로 재미로 연습한 것에 불과하다.</p>
<div class="figure">
<img src="assets/images/file-arch.png" style="width:100.0%" alt=""><p class="caption">소프트웨어 아키텍처</p>
</div>
<p>이번 장에서 보조 기억장치(Secondary Memory) 혹은 파일을 가지고 작업을 시작한다.
보조 기억장치는 전원이 꺼져도 지워지지 않는다.
혹은, USB 플래쉬 드라이브를 사용한 경우에는 프로그램으로부터 작성한 데이터는 시스템에서 제거되어 다른 시스템으로 전송될 수 있다.</p>
<p>우선 텍스트 편집기로 작성한 텍스트 파일을 읽고 쓰는 것에 초점을 맞출 것이다.
나중에 데이터베이스 소프트웨어를 통해서 읽고 쓰도록 설계된 바이너리 파일 데이터베이스를 가지고 어떻게 작업하는지를 살펴볼 것이다.</p>
</div>
<div id="r-file-open" class="section level2" number="8.2">
<h2>
<span class="header-section-number">8.2</span> 파일 열기<a class="anchor" aria-label="anchor" href="#r-file-open"><i class="fas fa-link"></i></a>
</h2>
<p>하드 디스크 파일을 읽거나 쓸려고 할 때, 파일을 열어야(open) 한다.
파일을 열 때 각 파일 데이터가 어디에 저장되었는지를 알고 있는 운영체제와 커뮤니케이션 한다.
파일을 열 때, 운영체제에 파일이 존재하는지 확인하고 이름으로 파일을 찾도록 요청한다.<br>
이번 예제에서, &lt;www.py4inf.com/code/mbox.txt&gt; 에서 파일을 다운로드한 후
R을 시작한 동일한 폴더에 저장된 <code>mbox.txt</code> 파일을 연다.</p>
<p><code>download.file("http://www.py4inf.com/code/mbox.txt", destfile = "data/mbox.txt")</code> 명령어를 사용하여
코딩을 시작하는 디렉토리 아래 <code>data</code> 디렉토리를 만들고 동일한 <code>mbox.txt</code> 이름으로 저장한다.</p>
<div class="sourceCode" id="cb292"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># download.file("http://www.py4inf.com/code/mbox.txt", destfile = "data/mbox.txt")</span>

<span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="st">"data/mbox.txt"</span>, open <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span>
<span class="va">fhand</span></code></pre></div>
<pre><code>## A connection with                           
## description "data/mbox.txt"
## class       "file"         
## mode        "r"            
## text        "text"         
## opened      "opened"       
## can read    "yes"          
## can write   "no"</code></pre>
<p><code>open</code>이 성공하면, 운영체제는 <strong>파일 핸들(file handle)</strong>을 반환한다.
파일 핸들(file handle)은 파일에 담겨진 실제 데이터는 아니고,
대신에 데이터를 읽을 수 있도록 사용할 수 있는 “핸들(handle)”이다.
요청한 파일이 존재하고, 파일을 읽을 수 있는 적절한 권한이 있다면 이제 핸들이 여러분에게 주어졌다.</p>
<div class="figure">
<img src="assets/images/file-handler.png" style="width:100.0%" alt=""><p class="caption">파일 핸들</p>
</div>
<p>파일이 존재하지 않는다면, open은 역추적(traceback) 파일 열기 오류로 실패하고, 파일 콘텐츠에 접근할 핸들도 얻지 못한다.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="r-file.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> fhand <span class="ot">&lt;-</span> <span class="fu">file</span>(<span class="st">"data/stuff.txt"</span>, <span class="st">"r"</span>)</span>
<span id="cb294-2"><a href="r-file.html#cb294-2" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">file</span>(<span class="st">"data/stuff.txt"</span>, <span class="st">"r"</span>) <span class="sc">:</span> cannot open the connection</span>
<span id="cb294-3"><a href="r-file.html#cb294-3" aria-hidden="true" tabindex="-1"></a>In addition<span class="sc">:</span> Warning message<span class="sc">:</span></span>
<span id="cb294-4"><a href="r-file.html#cb294-4" aria-hidden="true" tabindex="-1"></a>In <span class="fu">file</span>(<span class="st">"data/stuff.txt"</span>, <span class="st">"r"</span>) <span class="sc">:</span></span>
<span id="cb294-5"><a href="r-file.html#cb294-5" aria-hidden="true" tabindex="-1"></a>  cannot open file <span class="st">'data/stuff.txt'</span><span class="sc">:</span> No such file or directory</span></code></pre></div>
<p>나중에 <code><a href="https://rdrr.io/r/base/conditions.html">tryCatch()</a></code>를 가지고, 존재하지 않는 파일을 열려고 하는 상황을 좀더 우아하게 처리할 것이다.</p>
<p>최근에 사용자 중심으로 R에 다양한 기능이 추가되어 <code>tidyverse</code> 팩키지 일부를 구성하는
<code>readr</code> 팩키지의 <code><a href="https://readr.tidyverse.org/reference/read_lines.html">read_lines()</a></code> 함수를 통해 인터넷 웹사이트에서 바로 불러오는 것도 가능하다.</p>
<div class="sourceCode" id="cb295"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># library(tidyverse)</span>

<span class="va">txt_file</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_lines.html">read_lines</a></span><span class="op">(</span><span class="st">"http://www.py4inf.com/code/mbox.txt"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">txt_file</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008"    
## [2] "Return-Path: &lt;postmaster@collab.sakaiproject.org&gt;"           
## [3] "Received: from murder (mail.umich.edu [141.211.14.90])"      
## [4] "\t by frankenstein.mail.umich.edu (Cyrus v2.3.8) with LMTPA;"
## [5] "\t Sat, 05 Jan 2008 09:14:16 -0500"                          
## [6] "X-Sieve: CMU Sieve 2.3"</code></pre>
</div>
<div id="r-file-txt" class="section level2" number="8.3">
<h2>
<span class="header-section-number">8.3</span> 텍스트 파일과 라인<a class="anchor" aria-label="anchor" href="#r-file-txt"><i class="fas fa-link"></i></a>
</h2>
<p>R 문자열이 문자 순서(sequence)로 간주 되듯이 마찬가지로 텍스트 파일은 줄(라인, line) 순서(sequence)로 생각될 수 있다.
예를 들어, 다음은 오픈 소스 프로젝트 개발 팀에서 다양한 참여자들의 전자우편 활동을 기록한 텍스트 파일 샘플이다.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="r-file.html#cb297-1" aria-hidden="true" tabindex="-1"></a>From stephen.marquard<span class="sc">@</span>uct.ac.za Sat Jan  <span class="dv">5</span> <span class="dv">09</span><span class="sc">:</span><span class="dv">14</span><span class="sc">:</span><span class="dv">16</span> <span class="dv">2008</span></span>
<span id="cb297-2"><a href="r-file.html#cb297-2" aria-hidden="true" tabindex="-1"></a>Return<span class="sc">-</span>Path<span class="sc">:</span> <span class="er">&lt;</span>postmaster<span class="sc">@</span>collab.sakaiproject.org<span class="sc">&gt;</span></span>
<span id="cb297-3"><a href="r-file.html#cb297-3" aria-hidden="true" tabindex="-1"></a>Date<span class="sc">:</span> Sat, <span class="dv">5</span> Jan <span class="dv">2008</span> <span class="dv">09</span><span class="sc">:</span><span class="dv">12</span><span class="sc">:</span><span class="dv">18</span> <span class="sc">-</span><span class="dv">0500</span></span>
<span id="cb297-4"><a href="r-file.html#cb297-4" aria-hidden="true" tabindex="-1"></a>To<span class="sc">:</span> source<span class="sc">@</span>collab.sakaiproject.org</span>
<span id="cb297-5"><a href="r-file.html#cb297-5" aria-hidden="true" tabindex="-1"></a>From<span class="sc">:</span> stephen.marquard<span class="sc">@</span>uct.ac.za</span>
<span id="cb297-6"><a href="r-file.html#cb297-6" aria-hidden="true" tabindex="-1"></a>Subject<span class="sc">:</span> [sakai] svn commit<span class="sc">:</span> r39772 <span class="sc">-</span> content<span class="sc">/</span>branches<span class="sc">/</span></span>
<span id="cb297-7"><a href="r-file.html#cb297-7" aria-hidden="true" tabindex="-1"></a>Details<span class="sc">:</span> http<span class="sc">:</span><span class="er">//</span>source.sakaiproject.org<span class="sc">/</span>viewsvn<span class="sc">/</span>?view<span class="ot">=</span>revrev<span class="ot">=</span><span class="dv">39772</span></span>
<span id="cb297-8"><a href="r-file.html#cb297-8" aria-hidden="true" tabindex="-1"></a>...</span></code></pre></div>
<p>상호 의사소통한 전자우편 전체 파일은 &lt;www.py4inf.com/code/mbox.txt&gt; 에서 접근 가능하고,
간략한 버젼 파일은 &lt;www.py4inf.com/code/mbox-short.txt&gt; 에서 얻을 수 있다.
이들 파일은 다수 전자우편 메시지를 담고 있는 파일로 표준 포맷으로 되어 있다.
“From”으로 시작하는 라인은 메시지 본문과 구별되고, “From:”으로 시작하는 라인은 본문 메시지의 일부다.
더 자세한 정보는 <a href="http://en.wikipedia.org/wiki/Mbox" class="uri">http://en.wikipedia.org/wiki/Mbox</a>에서 찾을 수 있다.</p>
<p>파일을 라인으로 쪼개기 위해서, 새줄(newline) 문자로 불리는 “줄의 끝(end of the line)”을 표시하는 특수 문자가 있다.</p>
<p>R에서, 문자열 상수 역슬래쉬-n()으로 새줄(newline) 문자를 표현한다.
두 문자처럼 보이지만, 사실은 단일 문자다. 인터프리터에 “stuff”에 입력한 후 변수를 살펴보면, 문자열에 있다.
하지만, <code>cat</code>문을 사용하여 문자열을 출력하면, 문자열이 새줄 문자에 의해서 두 줄로 쪼개지는 것을 볼 수 있다.</p>
<div class="sourceCode" id="cb298"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">stuff</span> <span class="op">&lt;-</span> <span class="st">'Hello\nWorld!'</span>
<span class="va">stuff</span></code></pre></div>
<pre><code>## [1] "Hello\nWorld!"</code></pre>
<div class="sourceCode" id="cb300"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">stuff</span><span class="op">)</span></code></pre></div>
<pre><code>## Hello
## World!</code></pre>
<div class="sourceCode" id="cb302"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">stuff</span> <span class="op">&lt;-</span> <span class="st">'X\nY'</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">stuff</span><span class="op">)</span></code></pre></div>
<pre><code>## X
## Y</code></pre>
<div class="sourceCode" id="cb304"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">stuff</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>문자열 ’X’의 길이는 <code>stringr::str_length("X\nY")</code> 명령어를 통해 확인이 가능한데 3 이다. 왜냐하면 새줄(newline) 문자도 한 문자이기 때문이다.</p>
<p>그래서, 파일 라인을 볼 때, 라인 끝을 표시하는 새줄(newline)로 불리는 눈에 보이지 않는 특수 문자가 각 줄의 끝에 있다고 상상할 필요가 있다.</p>
<p>그래서, 새줄(newline) 문자는 파일에 있는 문자를 라인으로 분리한다.</p>
</div>
<div id="r-file-open-handler" class="section level2" number="8.4">
<h2>
<span class="header-section-number">8.4</span> 파일 읽어오기<a class="anchor" aria-label="anchor" href="#r-file-open-handler"><i class="fas fa-link"></i></a>
</h2>
<p>파일 핸들(file handle)이 파일 자료를 담고 있지 않지만,
for 루프를 사용하여 파일 각 라인을 읽고 라인수를 세는 것을 쉽게 구축할 수 있다.</p>
<div class="sourceCode" id="cb306"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="st">'data/mbox.txt'</span>, open <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span>
<span class="va">count</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="kw">for</span><span class="op">(</span><span class="va">line</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">count</span> <span class="op">&lt;-</span> <span class="va">count</span> <span class="op">+</span> <span class="fl">1</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'Line Count:'</span>, <span class="va">count</span>, <span class="st">"\n"</span><span class="op">)</span></code></pre></div>
<pre><code>## Line Count: 132045</code></pre>
<div class="sourceCode" id="cb308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/connections.html">close</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span></code></pre></div>
<p>파일 핸들을 <code>for</code> 루프 순서(sequence)로 사용할 수 있다.
<code>for</code> 루프는 단순히 파일 라인 수를 세고 전체 라인수를 출력한다.
<code>for</code> 루프를 대략 일반어로 풀어 말하면,
“파일 핸들로 표현되는 파일 각 라인마다, <code>count</code> 변수에 1 씩 더한다”</p>
<p><code>file</code> 함수가 전체 파일을 바로 읽지 못하는 이유는 파일이 수 기가 바이트 파일 크기를 가질 수도 있기 때문이다.
<code>file</code> 문장은 파일 크기에 관계없이 파일을 여는데 시간이 동일하게 걸린다.
실질적으로 <code>for</code> 루프가 파일로부터 자료를 읽어오는 역할을 한다.</p>
<p><code>for</code> 루프를 사용해서 이 같은 방식으로 파일을 읽어올 때, 새줄(newline) 문자를 사용해서 파일 자료를 라인 단위로 쪼갠다.
파이썬에서 새줄(newline) 문자까지 각 라인 단위로 읽고,
<code>for</code> 루프가 매번 반복할 때마다 line 변수에 새줄(newline)을 마지막 문자로 포함한다.</p>
<p><code>for</code> 루프가 데이터를 한번에 한줄씩 읽어오기 때문에, 데이터를 저장할 주기억장치 저장공간을 소진하지 않고, 매우 큰 파일을 효과적으로 읽어서 라인을 셀 수 있다.
각 라인별로 읽고, 세고, 그리고 나서 폐기되기 때문에, 매우 적은 저장공간을 사용해서 어떤 크기의 파일도 상기 프로그램을 사용하여 라인을 셀 수 있다.</p>
<p>만약 주기억장치 크기에 비해서 상대적으로 작은 크기의 파일이라는 것을 안다면,
전체 파일을 파일 핸들로 <code><a href="https://rdrr.io/r/base/readLines.html">readLines()</a></code> 함수를 사용해서 문자열로 읽어올 수 있다.</p>
<div class="sourceCode" id="cb309"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="st">"data/mbox-short.txt"</span>, open <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span>
<span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readChar.html">readChar</a></span><span class="op">(</span><span class="va">fhand</span>, nchars<span class="op">=</span><span class="fl">1e6</span><span class="op">)</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">inp</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 94626</code></pre>
<div class="sourceCode" id="cb311"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/connections.html">close</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span>

<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">inp</span>, <span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "From stephen.marquar"</code></pre>
<p>상기 예제에서, <code>mbox-short.txt</code> 전체 파일 콘텐츠(96,536 문자)를 변수 <code>inp</code>로 바로 읽었다.
문자열 슬라이싱을 사용해서 <code>inp</code>에 저장된 문자열 자료 첫 20 문자를 출력한다.</p>
<p>파일이 이런 방식으로 읽혀질 때, 모든 라인과 새줄(newline)문자를 포함한 모든 문자는 변수 <code>inp</code>에 대입된 매우 큰 문자열이다.
파일 데이터가 컴퓨터 주기억장치가 안정적으로 감당해 낼 수 있을때만,
이런 형식의 <code><a href="https://rdrr.io/r/base/readChar.html">readChar()</a></code> 함수가 사용될 수 있다는 것을 기억하라.</p>
<p>만약 주기억장치가 감당해 낼 수 없는 매우 파일 크기가 크다면, <code>for</code>나 <code>while</code> 루프를 사용해서 파일을 쪼개서 읽는 프로그램을 작성해야 한다.</p>
</div>
<div id="r-file-search" class="section level2" number="8.5">
<h2>
<span class="header-section-number">8.5</span> 파일 검색<a class="anchor" aria-label="anchor" href="#r-file-search"><i class="fas fa-link"></i></a>
</h2>
<p>파일 데이터를 검색할 때, 흔한 패턴은 파일을 읽고, 대부분 라인은 건너뛰고, 특정 기준을 만족하는 라인만 처리하는 것이다.
간단한 검색 메카니즘을 구현하기 위해서 파일을 읽는 패턴과 문자열 메쏘드를 조합한다.</p>
<p>예를 들어, 파일을 읽고, “From:”으로 시작하는 라인만 출력하고자 한다면,
<code>stringr</code> 팩키지에 포함된 <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> 문자열 탐지 함수를 사용해서 원하는 접두사(From:)로 시작하는 라인만을 선택한다.</p>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="st">'data/mbox-short.txt'</span>, open <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span>

<span class="kw">for</span><span class="op">(</span><span class="va">line</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">line</span>, <span class="st">"^From:"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">line</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
<p>이 프로그램이 실행하면 다음 출력값을 얻는다.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="r-file.html#cb314-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008"</span></span>
<span id="cb314-2"><a href="r-file.html#cb314-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From: stephen.marquard@uct.ac.za"</span></span>
<span id="cb314-3"><a href="r-file.html#cb314-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From louis@media.berkeley.edu Fri Jan  4 18:10:48 2008"</span></span>
<span id="cb314-4"><a href="r-file.html#cb314-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From: louis@media.berkeley.edu"</span></span>
<span id="cb314-5"><a href="r-file.html#cb314-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From zqian@umich.edu Fri Jan  4 16:10:39 2008"</span></span>
<span id="cb314-6"><a href="r-file.html#cb314-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From: zqian@umich.edu"</span></span>
<span id="cb314-7"><a href="r-file.html#cb314-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From rjlowe@iupui.edu Fri Jan  4 15:46:24 2008"</span></span></code></pre></div>
<p>“From:”으로만 시작하는 라인만 출력하기 때문에 출력값은 훌륭해 보인다.</p>
<p>파일 처리 프로그램이 점점 더 복잡해짐에 따라 <code><a href="https://rdrr.io/r/base/Control.html">next</a></code>를 사용해서 검색 루프(search loop)를 구조화할 필요가 있다.
검색 루프의 기본 아이디어는 “흥미로운” 라인을 집중적으로 찾고, “흥미롭지 않은” 라인은 효과적으로 건너뛰는 것이다.
그리고 나서 흥미로운 라인을 찾게되면, 그 라인에서 특정 연산을 수행하는 것이다.</p>
<p>다음과 같이 루프를 구성해서 흥미롭지 않은 라인은 건떠뛰는 패턴을 따르게 한다.</p>
<div class="sourceCode" id="cb315"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="st">'data/mbox-short.txt'</span>, open <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span>

<span class="kw">for</span><span class="op">(</span><span class="va">line</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">line</span>, <span class="st">"^From:"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">next</span>
  <span class="op">}</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">line</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>프로그램의 출력값은 동일하다.
흥미롭지 않는 라인은 “From:”으로 시작하지 않는 라인이라 <code><a href="https://rdrr.io/r/base/Control.html">next</a></code>문을 사용해서 건너뛴다.
“흥미로운” 라인 (즉, “From:”으로 시작하는 라인)에 대해서는 연산처리를 수행한다.</p>
<p><code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> 문자열 함수를 사용해서 검색 문자열이 라인 어디에 있는지를 찾아주는 텍스트 편집기 검색기능을 모사(simulation)할 수 있다.
<code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> 문자열 함수는 다른 문자열 내부에 검색하는 문자열이 있는지 찾고, 존재하는 경우 참(TRUE) 만약 문자열이 없다면 거짓(FALSE)을 반환하기 때문에,
“<span class="citation">(<a href="#ref-uct.ac.za" role="doc-biblioref"><strong>uct.ac.za?</strong></a>)</span>”(남아프리카 케이프 타운 대학으로부터 왔다) 문자열을 포함하는 라인을 검색하기 위해 다음과 같이 루프를 작성한다.</p>
<div class="sourceCode" id="cb316"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="st">'data/mbox-short.txt'</span>, open <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span>

<span class="kw">for</span><span class="op">(</span><span class="va">line</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">line</span>, <span class="st">"@uct.ac.za"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">next</span>
  <span class="op">}</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">line</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>출력결과는 다음과 같다.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="r-file.html#cb317-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From stephen.marquard@uct.ac.za Sat Jan  5 09:14:16 2008"</span></span>
<span id="cb317-2"><a href="r-file.html#cb317-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"X-Authentication-Warning: nakamura.uits.iupui.edu: apache set sender to stephen.marquard@uct.ac.za using -f"</span></span>
<span id="cb317-3"><a href="r-file.html#cb317-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From: stephen.marquard@uct.ac.za"</span></span>
<span id="cb317-4"><a href="r-file.html#cb317-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Author: stephen.marquard@uct.ac.za"</span></span>
<span id="cb317-5"><a href="r-file.html#cb317-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From david.horwitz@uct.ac.za Fri Jan  4 07:02:32 2008"</span></span>
<span id="cb317-6"><a href="r-file.html#cb317-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"X-Authentication-Warning: nakamura.uits.iupui.edu: apache set sender to david.horwitz@uct.ac.za using -f"</span></span>
<span id="cb317-7"><a href="r-file.html#cb317-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From: david.horwitz@uct.ac.za"</span></span>
<span id="cb317-8"><a href="r-file.html#cb317-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Author: david.horwitz@uct.ac.za"</span></span>
<span id="cb317-9"><a href="r-file.html#cb317-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"r39753 | david.horwitz@uct.ac.za | 2008-01-04 13:05:51 +0200 (Fri, 04 Jan 2008) | 1 line"</span></span>
<span id="cb317-10"><a href="r-file.html#cb317-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"From david.horwitz@uct.ac.za Fri Jan  4 06:08:27 2008"</span></span>
<span id="cb317-11"><a href="r-file.html#cb317-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"X-Authentication-Warning: nakamura.uits.iupui.edu: apache set sender to david.horwitz@uct.ac.za using -f"</span></span></code></pre></div>
</div>
<div id="r-file-user-input" class="section level2" number="8.6">
<h2>
<span class="header-section-number">8.6</span> 사용자가 파일명 선택<a class="anchor" aria-label="anchor" href="#r-file-user-input"><i class="fas fa-link"></i></a>
</h2>
<p>매번 다른 파일을 처리할 때마다 R 코드를 편집하고 싶지는 않다.
매번 프로그램이 실행될 때마다, 파일명을 사용자가 입력하도록 만드는 것이 좀더 유용할 것이다.
그래서 R 코드를 바꾸지 않고, 다른 파일에 대해서도 동일한 프로그램을 사용하도록 만들자.</p>
<p>다음과 같이 <code>commandArgs</code>을 사용해서 사용자로부터 파일명을 읽어 프로그램을 실행하는 것이 단순하다.
<code>file-user-input.R</code> 파일에 다음과 같이 R 스크립트를 작성한다.
자세한 사항은 <a href="http://statkclee.github.io/parallel-r/">R 병렬 프로그래밍</a>을 참조한다. <a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="http://statkclee.github.io/parallel-r/r-parallel-rscript-args.html"&gt;.R 스크립트를 인자와 함께 실행&lt;/a&gt;&lt;/p&gt;'><sup>9</sup></a>
그리고, 사용자의 입력을 받도록 하는 프롬프트를 생략하고 바로 쉘에서 인자를 넘기는 것으로 프로그램을 작성했다.</p>
<div class="sourceCode" id="cb318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#!/usr/bin/env Rscript</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>

<span class="va">args</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/commandArgs.html">commandArgs</a></span><span class="op">(</span>trailingOnly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="va">fname</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>

<span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="va">fname</span>, open <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span>

<span class="va">count</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="kw">for</span><span class="op">(</span><span class="va">line</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">line</span>, <span class="st">"Subject:"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">count</span> <span class="op">&lt;-</span> <span class="va">count</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'There were'</span>, <span class="va">count</span>, <span class="st">'subject lines in'</span>, <span class="va">fname</span><span class="op">)</span></code></pre></div>
<p>사용자로부터 파일명을 읽고 변수 <code>fname</code>에 저장하고, 그 파일을 연다.
이제 다른 파일에 대해서도 반복적으로 프로그램을 실행할 수 있다.
RStudio <code>Terminal</code> (<code>Console</code> 패널 아님)을 열고 다음과 같이 인자를 넘겨 실행하면 된다.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="r-file.html#cb319-1" aria-hidden="true" tabindex="-1"></a>D<span class="sc">:</span>\docs\r4inf\code<span class="sc">&gt;</span>Rscript file<span class="sc">-</span>user<span class="sc">-</span>input.R <span class="st">"data/mbox-short.txt"</span></span>
<span id="cb319-2"><a href="r-file.html#cb319-2" aria-hidden="true" tabindex="-1"></a>There were <span class="dv">27</span> subject lines <span class="cf">in</span> ..<span class="sc">/</span>data<span class="sc">/</span>mbox<span class="sc">-</span>short.txt</span></code></pre></div>
<p>다음 절을 엿보기 전에, 상기 프로그램을 살펴보고 자신에게 다음을 질문해 보자.
“여기서 어디가 잘못될 수 있는가?” 혹은
“이 작고 멋진 프로그램에 트레이스백(traceback)을 남기고 바로 끝나게 하여,
결국 사용자 눈에는 좋지 않은 프로그램이라는 인상을 남길 수 있도록 우리의 친절한 사용자는 무엇을 할 수 있을까?”</p>
</div>
<div id="r-file-trycatch" class="section level2" number="8.7">
<h2>
<span class="header-section-number">8.7</span> <code>tryCatch</code> 사용하기<a class="anchor" aria-label="anchor" href="#r-file-trycatch"><i class="fas fa-link"></i></a>
</h2>
<p>제가 여러분에게 엿보지 말라고 말씀드렸습니다. 이번이 마지막 기회입니다.
사용자가 파일명이 아닌 뭔가 다른 것을 입력하면 어떻게 될까요?</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="r-file.html#cb320-1" aria-hidden="true" tabindex="-1"></a>D<span class="sc">:</span>\docs\r4inf\code<span class="sc">&gt;</span>Rscript file<span class="sc">-</span>user<span class="sc">-</span>input.R <span class="st">"data/missing.txt"</span></span>
<span id="cb320-2"><a href="r-file.html#cb320-2" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">file</span>(fname, <span class="at">open =</span> <span class="st">"r"</span>) <span class="sc">:</span></span>
<span id="cb320-3"><a href="r-file.html#cb320-3" aria-hidden="true" tabindex="-1"></a><span class="er">:</span> ()<span class="sc">:</span></span>
<span id="cb320-4"><a href="r-file.html#cb320-4" aria-hidden="true" tabindex="-1"></a>In <span class="fu">file</span>(fname, <span class="at">open =</span> <span class="st">"r"</span>) <span class="sc">:</span></span>
<span id="cb320-5"><a href="r-file.html#cb320-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">'data/missing.txt'</span>  <span class="sc">:</span> No such file or directory</span>
<span id="cb320-6"><a href="r-file.html#cb320-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-7"><a href="r-file.html#cb320-7" aria-hidden="true" tabindex="-1"></a>D<span class="sc">:</span>\docs\r4inf\code<span class="sc">&gt;</span>Rscript file<span class="sc">-</span>user<span class="sc">-</span>input.R <span class="st">"na na boo boo"</span></span>
<span id="cb320-8"><a href="r-file.html#cb320-8" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">file</span>(fname, <span class="at">open =</span> <span class="st">"r"</span>) <span class="sc">:</span></span>
<span id="cb320-9"><a href="r-file.html#cb320-9" aria-hidden="true" tabindex="-1"></a><span class="er">:</span> ()<span class="sc">:</span></span>
<span id="cb320-10"><a href="r-file.html#cb320-10" aria-hidden="true" tabindex="-1"></a>In <span class="fu">file</span>(fname, <span class="at">open =</span> <span class="st">"r"</span>) <span class="sc">:</span></span>
<span id="cb320-11"><a href="r-file.html#cb320-11" aria-hidden="true" tabindex="-1"></a>   <span class="st">'na na boo boo'</span>  <span class="sc">:</span> No such file or directory</span></code></pre></div>
<p>웃지마시구요, 사용자는 결국 여러분이 작성한 프로그램을 망가뜨리기 위해 고의든 악의를 가지든 가능한 모든 수단을 강구할 것입니다.
사실, 소프트웨어 개발팀의 중요한 부분은 <strong>품질 보증(Quality Assurance, QA)</strong>이라는 조직이다.
품질보증 조직은 프로그래머가 만든 소프트웨어를 망가뜨리기 위해 가능한 말도 안 되는 것을 합니다.</p>
<p>사용자가 소프트웨어를 제품으로 구매하거나, 주문형으로 개발하는 프로그램에 대해 월급을 지급하던지 관계없이
품질보증 조직은 프로그램이 사용자에게 전달되기 전까지 프로그램 오류를 발견할 책임이 있다.
그래서 품질보증 조직은 프로그래머의 최고의 친구다.</p>
<p>프로그램 오류를 찾았기 때문에, <code>tryCatch</code> 구조를 사용해서 오류를 우아하게 고쳐봅시다.
파일 열기 <code><a href="https://rdrr.io/r/base/connections.html">file()</a></code> 호출이 잘못될 수 있다고 가정하고, <code><a href="https://rdrr.io/r/base/connections.html">file()</a></code> 호출이 실패할 때를 대비해서 다음과 같이 복구 코드를 추가한다.</p>
<div class="sourceCode" id="cb321"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#!/usr/bin/env Rscript</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>

<span class="va">args</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/commandArgs.html">commandArgs</a></span><span class="op">(</span>trailingOnly<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="va">fname</span> <span class="op">&lt;-</span> <span class="va">args</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>

<span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span><span class="op">{</span>
  <span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="va">fname</span>, open <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span><span class="op">}</span>,
  error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">err</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"ERROR: "</span>, <span class="va">err</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">count</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="kw">for</span><span class="op">(</span><span class="va">line</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">line</span>, <span class="st">"Subject:"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">count</span> <span class="op">&lt;-</span> <span class="va">count</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'There were'</span>, <span class="va">count</span>, <span class="st">'subject lines in'</span>, <span class="va">fname</span><span class="op">)</span></code></pre></div>
<p>이제 사용자 혹은 품질 보증 조직에서 올바르지 않거나 어처구니 없는 파일명을 입력했을 때,
버그를 “tryCatch()” 함수로 잡아서 우아하게 복구한다.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="r-file.html#cb322-1" aria-hidden="true" tabindex="-1"></a>D<span class="sc">:</span>\docs\r4inf\code<span class="sc">&gt;</span> Rscript file<span class="sc">-</span>user<span class="sc">-</span>input<span class="sc">-</span>try.R <span class="st">"na na boo boo"</span></span>
<span id="cb322-2"><a href="r-file.html#cb322-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"ERROR:  Error in file(fname, open = </span><span class="sc">\"</span><span class="st">r</span><span class="sc">\"</span><span class="st">):    </span><span class="sc">\n</span><span class="st">"</span></span>
<span id="cb322-3"><a href="r-file.html#cb322-3" aria-hidden="true" tabindex="-1"></a>()<span class="sc">:</span></span>
<span id="cb322-4"><a href="r-file.html#cb322-4" aria-hidden="true" tabindex="-1"></a>In <span class="fu">file</span>(fname, <span class="at">open =</span> <span class="st">"r"</span>) <span class="sc">:</span></span>
<span id="cb322-5"><a href="r-file.html#cb322-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">'na na boo boo'</span>  <span class="sc">:</span> No such file or directory</span>
<span id="cb322-6"><a href="r-file.html#cb322-6" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">readLines</span>(fhand) <span class="sc">:</span>  <span class="st">'fhand'</span></span>
<span id="cb322-7"><a href="r-file.html#cb322-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-8"><a href="r-file.html#cb322-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb322-9"><a href="r-file.html#cb322-9" aria-hidden="true" tabindex="-1"></a>D<span class="sc">:</span>\docs\r4inf\code<span class="sc">&gt;</span>Rscript file<span class="sc">-</span>user<span class="sc">-</span>input<span class="sc">-</span>try.R <span class="st">"../data/mbox-short.txt"</span></span>
<span id="cb322-10"><a href="r-file.html#cb322-10" aria-hidden="true" tabindex="-1"></a>There were <span class="dv">27</span> subject lines <span class="cf">in</span> ..<span class="sc">/</span>data<span class="sc">/</span>mbox<span class="sc">-</span>short.txt</span>
<span id="cb322-11"><a href="r-file.html#cb322-11" aria-hidden="true" tabindex="-1"></a>D<span class="sc">:</span>\docs\r4inf\code<span class="sc">&gt;</span>Rscript file<span class="sc">-</span>user<span class="sc">-</span>input<span class="sc">-</span>try.R <span class="st">"../data/mbox.txt"</span></span>
<span id="cb322-12"><a href="r-file.html#cb322-12" aria-hidden="true" tabindex="-1"></a>There were <span class="dv">1797</span> subject lines <span class="cf">in</span> ..<span class="sc">/</span>data<span class="sc">/</span>mbox.txt</span></code></pre></div>
<p>R 프로그램을 작성할 때 <code><a href="https://rdrr.io/r/base/connections.html">file()</a></code> 파일 열기 호출을 보호하는 것은 <code>tryCath()</code>의 적절한 사용 예제가 된다.
“R 방식(R way)”으로 무언가를 작성할 때, “알스러운”이라는 용어를 사용한다.
상기 파일을 여는 예제는 알스러운 방식의 좋은 예가 된다고 말한다.</p>
<p>R에 좀더 자신감이 생기게 되면, 다른 R 프로그래머와 동일한 문제에 대해
두 가지 동치하는 해답을 가지고 어떤 접근법이 좀더 “알스러운지”에 대한 현답을 찾는데도 관여하게 된다.</p>
<p>“좀더 알스럽게” 되는 이유는 프로그래밍이 엔지니어링적인 면과 예술적인 면을 동시에 가지고 있기 때문이다.
항상 무언가를 단지 작동하는 것에만 관심이 있지 않고,
프로그램으로 작성한 해결책이 좀더 우아하고, 다른 동료에 의해서 우아한 것으로 인정되기를 또한 원합니다.</p>
</div>
<div id="r-file-write" class="section level2" number="8.8">
<h2>
<span class="header-section-number">8.8</span> 파일에 쓰기<a class="anchor" aria-label="anchor" href="#r-file-write"><i class="fas fa-link"></i></a>
</h2>
<p>파일에 쓰기 위해서는 두 번째 매개 변수로 ‘w’ 모드로 파일을 열어야 한다.</p>
<div class="sourceCode" id="cb323"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fhand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html">file</a></span><span class="op">(</span><span class="st">"data/output.txt"</span>, open <span class="op">=</span> <span class="st">"w"</span><span class="op">)</span>
<span class="va">fhand</span></code></pre></div>
<p>파일이 이미 존재하는데 쓰기 모드에서 파일을 여는 것은 이전 데이터를 모두 지워버리고,
깨끗한 파일 상태에서 다시 시작되니 주의가 필요하다.
만약 파일이 존재하지 않는다면, 새로운 파일이 생성된다.</p>
<p>파일 핸들 객체의 <code><a href="https://rdrr.io/r/base/writeLines.html">writeLines()</a></code> 함수는 데이터를 파일에 저장한다.</p>
<div class="sourceCode" id="cb324"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html">writeLines</a></span><span class="op">(</span><span class="st">"This here's the wattle,"</span>, <span class="va">fhand</span><span class="op">)</span></code></pre></div>
<p>다시 한번, 파일 객체는 마지막 포인터가 어디에 있는지 위치를 추적해서,
만약 write 메쏘드를 다시 호출하게 되면, 새로운 데이터를 파일 끝에 추가한다.</p>
<p>라인을 끝내고 싶을 때, 명시적으로 새줄(newline) 문자를 삽입해서 파일에 쓰도록 라인 끝을 필히 관리해야 한다.</p>
<p><code>print</code>문이 자동적으로 새줄(newline)을 추가하듯이 <code><a href="https://rdrr.io/r/base/writeLines.html">writeLines()</a></code> 함수도 자동적으로 새줄(newline)을 추가한다.</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html">writeLines</a></span><span class="op">(</span><span class="st">"the emblem of our land.'"</span>, <span class="va">fhand</span><span class="op">)</span></code></pre></div>
<p>파일 쓰기가 끝났을 때, 파일을 필히 닫아야 한다.
파일을 닫는 것은 데이터 마지막 비트까지 디스크에 물리적으로 쓰여져서,
전원이 나가더라도 자료가 유실되지 않는 역할을 한다.</p>
<div class="sourceCode" id="cb326"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/connections.html">close</a></span><span class="op">(</span><span class="va">fhand</span><span class="op">)</span></code></pre></div>
<p>파일 읽기로 연 파일을 닫을 수 있지만, 몇개 파일을 열어 놓았다면 약간 단정치 못하게 끝날 수 있습니다.
왜냐하면 프로그램이 종료될 때 열린 모든 파일이 닫혀졌는지 파이썬이 확인하기 때문이다.
파일에 쓰기를 할 때는, 파일을 명시적으로 닫아서 예기치 못한 일이 발생할 여지를 없애야 한다.</p>
<p>파일에 두 문장을 써 넣은 결과는 다음과 같다.</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="r-file.html#cb327-1" aria-hidden="true" tabindex="-1"></a>D<span class="sc">:</span>\docs\r4inf<span class="sc">&gt;</span> cat data<span class="sc">/</span>output.txt</span>
<span id="cb327-2"><a href="r-file.html#cb327-2" aria-hidden="true" tabindex="-1"></a>This here<span class="st">'s the wattle,</span></span>
<span id="cb327-3"><a href="r-file.html#cb327-3" aria-hidden="true" tabindex="-1"></a><span class="st">the emblem of our land.</span></span></code></pre></div>
</div>
<div id="r-file-debug" class="section level2" number="8.9">
<h2>
<span class="header-section-number">8.9</span> 디버깅<a class="anchor" aria-label="anchor" href="#r-file-debug"><i class="fas fa-link"></i></a>
</h2>
<p>파일을 읽고 쓸 때, 공백 때문에 종종 문제에 봉착한다.
이런 종류의 오류는 공백, 탭, 새줄(newline)이 눈에 보이지 않기 때문에 디버그하기도 쉽지 않다.</p>
<div class="sourceCode" id="cb328"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s</span> <span class="op">&lt;-</span> <span class="st">'1 2\t 3\n 4'</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span></code></pre></div>
<pre><code>## 1 2   3
##  4</code></pre>
<p>우선 RStudio IDE의 상단 메뉴에서 Tools -&gt; Global Options -&gt; Code -&gt; Display -&gt; “Show whitespace characters” 를 통해
공백문자(whitespace)에 대해 확인할 수 있다.</p>
<p>문자열 공백문자는 역슬래쉬 순서(sequence)로 나타냅니다.</p>
<p>여러분이 봉착하는 또 다른 문제는 다른 시스템에서는 라인 끝을 표기하기 위해서 다른 문자를 사용한다는 점이다.
어떤 시스템은 <code>\n</code> 으로 새줄(newline)을 표기하고, 다른 시스템은 <code>\r</code>으로 반환 문자(return character)를 사용한다.
둘다 모두 사용하는 시스템도 있다.
파일을 다른 시스템으로 이식한다면, 이러한 불일치가 문제를 야기한다.</p>
<p>대부분의 시스템에는 A 포맷에서 B 포멧으로 변환하는 응용프로그램이 있다.
<a href="https://en.wikipedia.org/wiki/Newline">https://en.wikipedia.org/wiki/Newline</a> 에서 응용프로그램을 찾을 수 있고, 좀더 많은 것을 읽을 수 있다.
물론, 여러분이 직접 프로그램을 작성할 수도 있다.</p>
</div>
<div id="r-file-terminology" class="section level2" number="8.10">
<h2>
<span class="header-section-number">8.10</span> 용어정의<a class="anchor" aria-label="anchor" href="#r-file-terminology"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<strong>잡기(catch)</strong>: try와 except 문을 사용해서 프로그램이 끝나는 예외 상황을 방지하는 것.</li>
<li>
<strong>새줄(newline)</strong>: 라인의 끝을 표기 위한 파일이나 문자열에 사용되는 특수 문자.</li>
<li>
<strong>파이썬스러운(Pythonic)</strong>: 파이썬에서 우아하게 작동하는 기술. “try와 catch를 사용하는 것은 파일이 없는 경우를 복구하는 파이썬스러운 방식이다.”</li>
<li>
<strong>품질 보증(Quality Assurance, QA)</strong>: 소프트웨어 제품의 전반적인 품질을 보중하는데 집중하는 사람이나 조직. 품질 보증은 소프트웨어 제품을 시험하고, 제품이 시장에 출시되기 전에 문제를 확인하는데 관여한다.</li>
<li>
<strong>텍스트 파일(text file)</strong>: 하드디스크 같은 영구 저장소에 저장된 일련의 문자 집합.</li>
</ul>
</div>
<div id="r-file-ex" class="section level2" number="8.11">
<h2>
<span class="header-section-number">8.11</span> 연습문제<a class="anchor" aria-label="anchor" href="#r-file-ex"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>파일을 읽고 한줄씩 파일의 내용을 모두 대문자로 출력하는 프로그램을 작성하세요.
프로그램을 실행하면 다음과 같이 보일 것입니다.</li>
</ol>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="r-file.html#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> Rscript shout.R <span class="st">"mbox-short.txt"</span></span>
<span id="cb330-2"><a href="r-file.html#cb330-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-3"><a href="r-file.html#cb330-3" aria-hidden="true" tabindex="-1"></a>FROM STEPHEN.MARQUARD<span class="sc">@</span>UCT.AC.ZA SAT JAN <span class="dv">5</span> <span class="dv">09</span><span class="sc">:</span><span class="dv">14</span><span class="sc">:</span><span class="dv">16</span> <span class="dv">2008</span></span>
<span id="cb330-4"><a href="r-file.html#cb330-4" aria-hidden="true" tabindex="-1"></a>RETURN<span class="sc">-</span>PATH<span class="sc">:</span> <span class="er">&lt;</span>POSTMASTER<span class="sc">@</span>COLLAB.SAKAIPROJECT.ORG<span class="sc">&gt;</span></span>
<span id="cb330-5"><a href="r-file.html#cb330-5" aria-hidden="true" tabindex="-1"></a>RECEIVED<span class="sc">:</span> FROM <span class="fu">MURDER</span> (MAIL.UMICH.EDU [<span class="dv">141</span>.<span class="dv">211</span>.<span class="fl">14.90</span>])</span>
<span id="cb330-6"><a href="r-file.html#cb330-6" aria-hidden="true" tabindex="-1"></a>BY <span class="fu">FRANKENSTEIN.MAIL.UMICH.EDU</span> (CYRUS V2.<span class="fl">3.8</span>) WITH LMTPA;</span>
<span id="cb330-7"><a href="r-file.html#cb330-7" aria-hidden="true" tabindex="-1"></a>SAT, <span class="dv">05</span> JAN <span class="dv">2008</span> <span class="dv">09</span><span class="sc">:</span><span class="dv">14</span><span class="sc">:</span><span class="dv">16</span> <span class="sc">-</span><span class="dv">0500</span></span></code></pre></div>
<p><a href="http://www.py4inf.com/code/mbox-short.txt">http://www.py4inf.com/code/mbox-short.txt</a>에서 파일을 다운로드 받으세요.</p>
<ol start="2" style="list-style-type: decimal">
<li>파일명을 입력받아, 파일을 읽고, 다음 형식의 라인을 찾는 프로그램을 작성하세요.</li>
</ol>
<blockquote>
<p>X-DSPAM-Confidence: <strong>0.8475</strong></p>
</blockquote>
<p>“X-DSPAM-Confidence:”로 시작하는 라인을 만나게 되면, 부동 소수점 숫자를 뽑아내기 위해 해당 라인을 별도로 보관하세요.
라인 수를 세고, 라인으로부터 스팸 신뢰값의 총계를 계산하세요.
파일의 끝에 도달할 했을 때, 평균 스팸 신뢰도를 출력하세요.</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="r-file.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> Rscript calc.R <span class="st">"mbox-short.txt"</span></span>
<span id="cb331-2"><a href="r-file.html#cb331-2" aria-hidden="true" tabindex="-1"></a>Average spam confidence<span class="sc">:</span> <span class="fl">0.750718518519</span></span>
<span id="cb331-3"><a href="r-file.html#cb331-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb331-4"><a href="r-file.html#cb331-4" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> Rscript calc.R <span class="st">"mbox.txt"</span></span>
<span id="cb331-5"><a href="r-file.html#cb331-5" aria-hidden="true" tabindex="-1"></a>Average spam confidence<span class="sc">:</span> <span class="fl">0.894128046745</span></span></code></pre></div>
<p><code>mbox.txt</code>와 <code>mbox-short.txt</code> 파일에 작성한 프로그램을 시험하세요.</p>
<ol start="3" style="list-style-type: decimal">
<li>때때로, 프로그래머가 지루해지거나, 약간 재미를 목적으로,
프로그램에 무해한 부활절 달걀(Easter Egg, <a href="https://en.wikipedia.org/wiki/Easter_egg_(media)">https://en.wikipedia.org/wiki/Easter_egg_(media)</a>)을 넣습니다.
사용자가 파일명을 입력하는 프로그램을 변형시켜, ’na na boo boo’로 파일명을 정확하게 입력했을 때, 재미있는 메시지를 출력하는 프로그램을 작성하세요.
파일이 존재하거나, 존재하지 않는 다른 모든 파일에 대해서도 정상적으로 작동해야 합니다.
여기 프로그램을 실행한 견본이 있습니다.</li>
</ol>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="r-file.html#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> Rscript egg.R <span class="st">"mbox.txt"</span></span>
<span id="cb332-2"><a href="r-file.html#cb332-2" aria-hidden="true" tabindex="-1"></a>There were <span class="dv">1797</span> subject lines <span class="cf">in</span> mbox.txt</span>
<span id="cb332-3"><a href="r-file.html#cb332-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb332-4"><a href="r-file.html#cb332-4" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> Rscript egg.R <span class="st">"missing.tyxt"</span></span>
<span id="cb332-5"><a href="r-file.html#cb332-5" aria-hidden="true" tabindex="-1"></a>File cannot be opened<span class="sc">:</span> missing.tyxt</span>
<span id="cb332-6"><a href="r-file.html#cb332-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb332-7"><a href="r-file.html#cb332-7" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> Rscript egg.R <span class="st">"na na boo boo"</span></span>
<span id="cb332-8"><a href="r-file.html#cb332-8" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="cn">NA</span> BOO BOO TO YOU <span class="sc">-</span> You have been punk<span class="st">'d!</span></span></code></pre></div>
<p>프로그램에 부활절 달걀을 넣도록 격려하지는 않습니다. 단지 연습입니다.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="r-string.html"><span class="header-section-number">7</span> 문자열</a></div>
<div class="next"><a href="r-list.html"><span class="header-section-number">9</span> 리스트 (List)</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-file"><span class="header-section-number">8</span> 파일</a></li>
<li><a class="nav-link" href="#r-file-persistence"><span class="header-section-number">8.1</span> 영속성(Persistence)</a></li>
<li><a class="nav-link" href="#r-file-open"><span class="header-section-number">8.2</span> 파일 열기</a></li>
<li><a class="nav-link" href="#r-file-txt"><span class="header-section-number">8.3</span> 텍스트 파일과 라인</a></li>
<li><a class="nav-link" href="#r-file-open-handler"><span class="header-section-number">8.4</span> 파일 읽어오기</a></li>
<li><a class="nav-link" href="#r-file-search"><span class="header-section-number">8.5</span> 파일 검색</a></li>
<li><a class="nav-link" href="#r-file-user-input"><span class="header-section-number">8.6</span> 사용자가 파일명 선택</a></li>
<li><a class="nav-link" href="#r-file-trycatch"><span class="header-section-number">8.7</span> tryCatch 사용하기</a></li>
<li><a class="nav-link" href="#r-file-write"><span class="header-section-number">8.8</span> 파일에 쓰기</a></li>
<li><a class="nav-link" href="#r-file-debug"><span class="header-section-number">8.9</span> 디버깅</a></li>
<li><a class="nav-link" href="#r-file-terminology"><span class="header-section-number">8.10</span> 용어정의</a></li>
<li><a class="nav-link" href="#r-file-ex"><span class="header-section-number">8.11</span> 연습문제</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>데이터 과학 프로그래밍</strong>" was written by 한국 알(R) 사용자회. It was last built on 2022-05-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
