<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>7 . 문자열 | 데이터 과학 프로그래밍</title>
<meta name="author" content="한국 알(R) 사용자회">
<meta name="description" content="7.1 문자열은 순열이다. 문자열은 여러 문자들의 순열(sequence)이다. 꺾쇠 연산자로 한번에 하나씩 문자에 접근한다. fruit &lt;- 'banana' fruit_letter &lt;- strsplit(fruit, &quot;&quot;) letter &lt;- fruit_letter[[1]][1] 두 번째 문장은 변수 fruit_letter에서 1번 위치 문자를 추출하여...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="7 . 문자열 | 데이터 과학 프로그래밍">
<meta property="og:type" content="book">
<meta property="og:description" content="7.1 문자열은 순열이다. 문자열은 여러 문자들의 순열(sequence)이다. 꺾쇠 연산자로 한번에 하나씩 문자에 접근한다. fruit &lt;- 'banana' fruit_letter &lt;- strsplit(fruit, &quot;&quot;) letter &lt;- fruit_letter[[1]][1] 두 번째 문장은 변수 fruit_letter에서 1번 위치 문자를 추출하여...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="7 . 문자열 | 데이터 과학 프로그래밍">
<meta name="twitter:description" content="7.1 문자열은 순열이다. 문자열은 여러 문자들의 순열(sequence)이다. 꺾쇠 연산자로 한번에 하나씩 문자에 접근한다. fruit &lt;- 'banana' fruit_letter &lt;- strsplit(fruit, &quot;&quot;) letter &lt;- fruit_letter[[1]][1] 두 번째 문장은 변수 fruit_letter에서 1번 위치 문자를 추출하여...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">데이터 과학 프로그래밍</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">기계와의 경쟁 1</a></li>
<li class="book-part">들어가며</li>
<li><a class="" href="r-vs-python.html"><span class="header-section-number">1</span> R vs 파이썬</a></li>
<li><a class="" href="r-intro.html"><span class="header-section-number">2</span> 프로그래밍 학습 이유</a></li>
<li class="book-part">프로그래밍</li>
<li><a class="" href="r-var.html"><span class="header-section-number">3</span> 변수, 표현식, 문장</a></li>
<li><a class="" href="r-cont.html"><span class="header-section-number">4</span> 조건부 실행</a></li>
<li><a class="" href="r-func.html"><span class="header-section-number">5</span> 함수</a></li>
<li><a class="" href="r-iter.html"><span class="header-section-number">6</span> 반복(Iteration)</a></li>
<li><a class="active" href="r-string.html"><span class="header-section-number">7</span> 문자열</a></li>
<li><a class="" href="r-file.html"><span class="header-section-number">8</span> 파일</a></li>
<li class="book-part">자료구조</li>
<li><a class="" href="r-list.html"><span class="header-section-number">9</span> 리스트 (List)</a></li>
<li><a class="" href="named-list.html"><span class="header-section-number">10</span> 딕셔너리</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-string" class="section level1" number="7">
<h1>
<span class="header-section-number">7 . </span> 문자열<a class="anchor" aria-label="anchor" href="#r-string"><i class="fas fa-link"></i></a>
</h1>
<div id="r-string-sequence" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> 문자열은 순열이다.<a class="anchor" aria-label="anchor" href="#r-string-sequence"><i class="fas fa-link"></i></a>
</h2>
<p>문자열은 여러 문자들의 순열(sequence)이다.
꺾쇠 연산자로 한번에 하나씩 문자에 접근한다.</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fruit</span> <span class="op">&lt;-</span> <span class="st">'banana'</span>
<span class="va">fruit_letter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="va">fruit</span>, <span class="st">""</span><span class="op">)</span>

<span class="va">letter</span> <span class="op">&lt;-</span> <span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<p>두 번째 문장은 변수 <code>fruit_letter</code>에서 1번 위치 문자를 추출하여 변수 <code>letter</code>에 대입한다.
꺾쇠 표현식을 인덱스(index)라고 부른다.
인덱스는 순서(sequence)에서 사용자가 어떤 문자를 원하는지 표시한다.</p>
<p>하지만, 여러분이 기대한 것은 출력됨이 확인된다.</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">letter</span></code></pre></div>
<pre><code>## [1] "b"</code></pre>
<p>파이썬 사용자에게 ’banana’의 첫 분자는 a가 아니라 b다.
하지만, 파이썬 인텍스는 문자열 처음부터 오프셋(offset)<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;컴퓨터에서 어떤 주소로부터 간격을 두고 떨어진 주소와의 거리.
기억 장치가 페이지 혹은 세그먼트 단위로 나누어져 있을 때 하나의 시작 주소로부터 오프셋만큼 떨어진 위치를 나타내는 것이다.
출처: 네이버 지식백과 - 오프셋 [offset] (IT용어사전, 한국정보통신기술협회)&lt;/p&gt;"><sup>8</sup></a>이다.
첫 글자 오프셋은 0 이다.</p>
<p>하지만, R은 사람 친화적이기 때문에 b가 ’banana’의 첫번째 문자가 되고 a가 두번째, n이 세번째 문자가 된다.</p>
<div class="figure">
<img src="assets/images/string-banana.png" style="width:100.0%" alt=""><p class="caption">바나나 문자열</p>
</div>
<p>인덱스로 문자와 연산자를 포함하는 어떤 표현식도 사용가능지만, 인덱스 값은 정수일 필요는 없다.
정수가 아닌 경우 다음과 같은 결과를 얻게 된다. 문제는 R에서 <code>1.5</code>를 내려서 <code>1</code>로 처리한다는 점이다.
경우에 따라서는 반올림으로 판단해서 <code>2</code>가 될 수도 있어 오해의 소지가 있기 때문에 무조건 정수로 표현한다.</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1.5</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "b"</code></pre>
</div>
<div id="r-string-length" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> <code>length()</code> 함수 사용 문자열 길이<a class="anchor" aria-label="anchor" href="#r-string-length"><i class="fas fa-link"></i></a>
</h2>
<p><code><a href="https://rdrr.io/r/base/length.html">length()</a></code> 함수는 문자열의 문자 갯수를 반환하는 내장함수다.</p>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fruit</span> <span class="op">&lt;-</span> <span class="st">'banana'</span>
<span class="va">fruit_letter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="va">fruit</span>, <span class="st">""</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>문자열의 가장 마지막 문자를 얻기 위해서, 아래와 같이 시도하려 싶을 것이다.</p>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">len</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">len</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "a"</code></pre>
<p>파이썬에서는 인덱스 오류 (IndexError)가 발생하는데 이유는 ‘banana’ 에 6번 인텍스 문자가 없기 때문이다.
0 에서부터 시작했기 때문에 6개 문자는 0 에서부터 5 까지 번호가 매겨졌다.
마지막 문자를 얻기 위해서 length에서 1을 빼야 한다.
하지만, R에서는 사람이 생각하는 방식대로 마지막 문자가 얻어진다.</p>
</div>
<div id="r-string-traversal" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> 루프를 사용한 문자열 순회<a class="anchor" aria-label="anchor" href="#r-string-traversal"><i class="fas fa-link"></i></a>
</h2>
<p>연산의 많은 경우에 문자열을 한번에 한 문자씩 처리한다.
종종 처음에서 시작해서, 차례로 각 문자를 선택하고, 선택된 문자에 임의 연산을 수행하고, 끝까지 계속한다.
이런 처리 패턴을 <strong>순회법(traversal)</strong>라고 한다.
순회법을 작성하는 한 방법이 <code>while</code> 루프다.</p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">index</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="kw">while</span><span class="op">(</span><span class="va">index</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="va">letter</span> <span class="op">&lt;-</span> <span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">index</span><span class="op">]</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">letter</span><span class="op">)</span>
  <span class="va">index</span> <span class="op">&lt;-</span> <span class="va">index</span> <span class="op">+</span> <span class="fl">1</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] "b"
## [1] "a"
## [1] "n"
## [1] "a"
## [1] "n"
## [1] "a"</code></pre>
<p>while 루프가 문자열을 운행하여 문자열을 한줄에 한 글자씩 화면에 출력한다.
루프 조건이 <code>index &lt;= length(fruit_letter[[1]])</code>이여서, <code>index</code>가 문자열 길이와 같을 때,
조건은 거짓이 되고, 루프의 몸통 부문은 실행이 되지 않는다.
R이 접근한 마지막 <code>length(fruit_letter[[1]])</code> 인텍스 문자로, 문자열의 마지막 문자다.</p>
<p><strong>연습문제:</strong> 문자열의 마지막 문자에서 시작해서,
문자열 처음으로 역진행하면서 한줄에 한자씩 화면에 출력하는 <code>while</code> 루프를 작성하세요.</p>
<p>운행법을 작성하는 또 다른 방법은 <code>for</code> 루프다.</p>
<div class="sourceCode" id="cb235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span><span class="op">(</span><span class="va">char</span> <span class="kw">in</span> <span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">char</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] "b"
## [1] "a"
## [1] "n"
## [1] "a"
## [1] "n"
## [1] "a"</code></pre>
<p>루프를 매번 반복할 때, 문자열 다음 문자가 변수 <code>char</code>에 대입된다.
루프는 더 이상 남겨진 문자가 없을 때까지 계속 실행된다.</p>
</div>
<div id="r-string-slice" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> 문자열 슬라이스<a class="anchor" aria-label="anchor" href="#r-string-slice"><i class="fas fa-link"></i></a>
</h2>
<p>문자열의 일부분을 <strong>슬라이스(slice)</strong>라고 한다.
문자열 슬라이스를 선택하는 것은 문자를 선택하는 것과 유사하다.</p>
<div class="sourceCode" id="cb237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="st">'Monty Python'</span>, <span class="st">""</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">s</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, collapse<span class="op">=</span><span class="st">""</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Monty"</code></pre>
<div class="sourceCode" id="cb239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">s</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">7</span><span class="op">:</span><span class="fl">12</span><span class="op">]</span>, collapse<span class="op">=</span><span class="st">""</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Python"</code></pre>
<p><code>[n:m]</code> 연산자는 <code>n</code>번째 문자부터 <code>m</code>번째 문자까지의 문자열 부분을 반환한다.</p>
<p>파이썬 <code>fruit[:3]</code>와 같이 콜론 앞 첫 인텍스를 생략하면, 문자열 슬라이스는 문자열 처음부터 시작한다.
파이썬 <code>fruit[3:]</code>와 같이 두 번째 인텍스를 생략하면, 문자열 슬라이스는 문자열 끝까지 간다.</p>
<p>이와 동일한 역할을 수행하는 방법은 <code>head(fruit_letter[[1]], 3)</code>, <code>tail(fruit_letter[[1]], 3)</code>와 같이
<code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>, <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> 함수를 활용한다.</p>
<div class="sourceCode" id="cb241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fruit</span> <span class="op">&lt;-</span> <span class="st">'banana'</span>
<span class="va">fruit_letter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="va">fruit</span>, <span class="st">""</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "b" "a" "n"</code></pre>
<div class="sourceCode" id="cb243"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "a" "n" "a"</code></pre>
<p>만약 첫번째 인텍스가 두번째보다 크거나 같은 경우 파이썬에는 결과가 인용부호로 표현되는 빈 문자열(empty string)이 된다.
하지만, R에서는 해당 인덱스에 해당되는 문자가 추출된다.</p>
<div class="sourceCode" id="cb245"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "n"</code></pre>
<div class="sourceCode" id="cb247"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fruit_letter</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] "a" "b"</code></pre>
<p>빈 문자열은 어떤 문자도 포함하지 않아서 길이가 0 이 되지만, 이것을 제외하고 다른 문자열과 동일하다.</p>
</div>
<div id="r-string-count" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> 루프 돌기 계수<a class="anchor" aria-label="anchor" href="#r-string-count"><i class="fas fa-link"></i></a>
</h2>
<p>다음 프로그램은 문자열에 문자 a가 나타나는 횟수를 계수(counting)한다.</p>
<div class="sourceCode" id="cb249"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">word</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="st">'banana'</span>, <span class="st">""</span><span class="op">)</span>
<span class="va">count</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="kw">for</span><span class="op">(</span><span class="va">letter</span> <span class="kw">in</span> <span class="va">word</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span><span class="op">(</span><span class="va">letter</span> <span class="op">==</span> <span class="st">'a'</span><span class="op">)</span><span class="op">{</span>
    <span class="va">count</span> <span class="op">&lt;-</span> <span class="va">count</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="va">count</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>상기 프로그램은 <strong>계수기(counter)</strong>라고 부르는 또다른 연산 패턴을 보여준다.
변수 count는 0 으로 초기화 되고, 매번 <code>a</code>를 찾을 때마다 증가한다.
루프를 빠져나갔을 때, <code>count</code>는 결과 값 즉, a가 나타난 총 횟수를 담고 있다.</p>
<p><strong>연습문제</strong> : 문자열과 문자를 인자(argument)로 받도록 상기 코드를 <code>count</code>라는 함수로 <strong>캡슐화(encapsulation)</strong>하고 일반화하세요.</p>
</div>
<div id="r-string-in-operator" class="section level2" number="7.6">
<h2>
<span class="header-section-number">7.6</span> <code>%in%</code> 연산자<a class="anchor" aria-label="anchor" href="#r-string-in-operator"><i class="fas fa-link"></i></a>
</h2>
<p>연산자 <code>in</code> 은 부울 연산자로 두 개의 문자열을 받아,
첫 번째 문자열이 두 번째 문자열의 일부이면 참(TRUE)을 반환한다.</p>
<div class="sourceCode" id="cb251"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">'a'</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="st">'banana'</span>, <span class="st">""</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb253"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">'c'</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span><span class="st">'banana'</span>, <span class="st">""</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="r-string-comparison-operator" class="section level2" number="7.7">
<h2>
<span class="header-section-number">7.7</span> 문자열 비교<a class="anchor" aria-label="anchor" href="#r-string-comparison-operator"><i class="fas fa-link"></i></a>
</h2>
<p>비교 연산자도 문자열에서 동작한다.
두 문자열이 같은지를 살펴보다.</p>
<div class="sourceCode" id="cb255"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">word</span> <span class="op">&lt;-</span> <span class="st">'banana'</span>

<span class="kw">if</span><span class="op">(</span><span class="va">word</span> <span class="op">==</span> <span class="st">'banana'</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">'All right, bananas.'</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] "All right, bananas."</code></pre>
<p>다른 비교 연산자는 단어를 알파벳 순서로 정렬하는데 유용하다.</p>
<div class="sourceCode" id="cb257"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">word</span> <span class="op">&lt;-</span> <span class="st">'Pineapple'</span>

<span class="kw">if</span><span class="op">(</span><span class="va">word</span> <span class="op">&lt;</span> <span class="st">'banana'</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'Your word'</span>,  <span class="va">word</span>, <span class="st">' comes before banana.'</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">word</span> <span class="op">&gt;</span> <span class="st">'banana'</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'Your word'</span>, <span class="va">word</span>, <span class="st">' comes after banana.'</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">'All right, bananas.'</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>## Your word Pineapple  comes after banana.</code></pre>
<p>이러한 문제를 다루는 일반적인 방식은 비교 연산을 수행하기 전에 문자열을 표준 포맷으로 예를 들어 모두 소문자, 변환하는 것입니다. 경우에 따라서 “Pineapple”로 무장한 사람들로부터 여러분을 보호해야하는 것을 명심하세요.</p>
</div>
<div id="r-string-method" class="section level2" number="7.8">
<h2>
<span class="header-section-number">7.8</span> 문자열 함수<a class="anchor" aria-label="anchor" href="#r-string-method"><i class="fas fa-link"></i></a>
</h2>
<p>R은 객체지향언어의 특성을 갖고 있지만 함수형 프로그래밍 언어의 특성도 갖고 있다.
문자열을 R 객체(objects)로 객체를 데이터(실제 문자열 자체)와 메쏘드(methods)를 담고 있는 것으로 바라볼 수도 있다.
메쏘드는 객체에 내장되고 어떤 객체의 인스턴스(instance)에도 사용되는 사실상 함수다.</p>
<p>하지만, 함수형 프로그래밍 패러다임으로 문자열을 객체로 두고 함수를 적용시켜 다양한 작업을 하는 것이 일반적이다.
<code>tidyverse</code> 팩키지를 설치하게 되면 <code>stringr</code> 팩키지가 구성요소로 포함되어 있다.
<code>str_</code>로 시작되는 다양한 함수가 지원된다.</p>
<p>예를 들어, <code>stringr</code> 팩키지 <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper()</a></code> 함수는 문자열을 받아 모두 대문자로 변환된 새로운 문자열을 반환한다.</p>
<div class="sourceCode" id="cb259"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="va">word</span> <span class="op">&lt;-</span> <span class="st">'banana'</span>
<span class="va">new_word</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span>
<span class="va">new_word</span>  </code></pre></div>
<pre><code>## [1] "BANANA"</code></pre>
<p>동일한 작업을 함수형 패러다임으로 <code>str_to_upper(word)</code>와 같이 표현하는데 반해,
객체지향으로 구현하면 파이썬 같은 경우 <code>word.upper()</code> 메쏘드 구문이 사용된다.</p>
<p>예를 들어, 문자열안에 문자열의 위치를 찾는 <code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all()</a></code>라는 문자열 함수가 있다.
<code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate()</a></code>는 매칭되는 첫번째만 반환하는 반면에 <code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all()</a></code>는 매칭되는 전부를 반환하는 차이가 있다.</p>
<div class="sourceCode" id="cb261"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate</a></span><span class="op">(</span><span class="va">word</span>, <span class="st">'a'</span><span class="op">)</span></code></pre></div>
<pre><code>##      start end
## [1,]     2   2</code></pre>
<p>상기 예제에서, word 문자열에 <code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all()</a></code> 함수를 호출하여 매개 변수로 찾고자 하는 문자를 넘긴다.</p>
<p><code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all()</a></code> 함수로 문자뿐만 아니라 부속 문자열(substring)도 찾을 수 있다.</p>
<div class="sourceCode" id="cb263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all</a></span><span class="op">(</span><span class="va">word</span>, <span class="st">'na'</span><span class="op">)</span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]     3   4
## [2,]     5   6</code></pre>
<p>한 가지 자주 있는 작업은 <code><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim()</a></code> 함수를 사용해서 문자열 시작과 끝의 공백(공백 여러개, 탭, 새줄)을 제거하는 것이다.</p>
<div class="sourceCode" id="cb265"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">line</span> <span class="op">&lt;-</span> <span class="st">'     Here we go '</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_trim</a></span><span class="op">(</span><span class="va">line</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Here we go"</code></pre>
<p><code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> 함수와 나중에 다룰 정규표현식을 섞어 표현하게 되면 참, 거짓 같은 부울 값(boolean value)을 반환한다. <code>'^Please'</code>에서 <code>^</code>은 문자열 시작을 지정한다.</p>
<div class="sourceCode" id="cb267"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">line</span> <span class="op">&lt;-</span> <span class="st">'Please have a nice day'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">line</span>, <span class="st">'^Please'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>대소문자를 구별하는 것을 요구하기 때문에 <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower()</a></code> 함수를 사용해서 검증을 수행하기 전에,
한 줄을 입력받아 모두 소문자로 변환하는 것이 필요하다.</p>
<div class="sourceCode" id="cb269"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">line</span> <span class="op">&lt;-</span> <span class="st">'Please have a nice day'</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">line</span>, <span class="st">'^p'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb271"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="va">line</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "please have a nice day"</code></pre>
<div class="sourceCode" id="cb273"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="va">line</span><span class="op">)</span>, <span class="st">'^p'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>마지막 예제에서 문자열이 문자 “p”로 시작하는지를 검증하기 위해서,
<code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower()</a></code> 함수를 호출하고 나서 바로 <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> 함수를 사용한다.
주의깊게 순서만 다룬다면, 한 줄에 다수 함수를 괄호에 넣어 호출할 수 있다.</p>
<p><strong>연습문제:</strong> 앞선 예제와 유사한 함수인 <code><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count()</a></code>로 불리는 문자열 메쏘드가 <code>stringr</code> 팩키지 내부에 있다.
<code>? str_count()</code> 도움말로 <code><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count()</a></code> 함수에 대한 문서를 읽고,
문자열 ’banana’의 문자가 몇 개인지 계수하는 메쏘드 호출 프로그램을 작성하세요.</p>
</div>
<div id="r-string-parsing" class="section level2" number="7.9">
<h2>
<span class="header-section-number">7.9</span> 문자열 파싱<a class="anchor" aria-label="anchor" href="#r-string-parsing"><i class="fas fa-link"></i></a>
</h2>
<p>종종, 문자열을 들여다 보고 특정 부속 문자열(substring)을 찾고 싶다.
예를 들어, 아래와 같은 형식으로 작성된 일련의 라인이 주어졌다고 가정하면,</p>
<p><code>From stephen.marquard@</code><strong>uct.ac.za</strong><code>Sat Jan  5 09:14:16 2008</code></p>
<p>각 라인마다 뒤쪽 전자우편 주소(즉, uct.ac.za)만 뽑아내고 싶을 것이다.
<code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate()</a></code> 함수와 문자열 슬라이싱(string sliceing)을 사용해서 작업을 수행할 수 있다.</p>
<p>우선, 문자열에서 골뱅이(<code>@</code>, at-sign) 기호의 위치를 찾는다.
그리고, 골뱅이 기호 뒤 첫 공백 위치를 찾는다.
그리고 나서, 찾고자 하는 부속 문자열을 뽑아내기 위해서 문자열 슬라이싱을 사용한다.</p>
<div class="sourceCode" id="cb275"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="st">'From stephen.marquard@uct.ac.za Sat Jan 5 09:14:16 2008'</span>
<span class="va">atpos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate</a></span><span class="op">(</span><span class="va">data</span>, <span class="st">'@'</span><span class="op">)</span>
<span class="va">atpos</span></code></pre></div>
<pre><code>##      start end
## [1,]    22  22</code></pre>
<div class="sourceCode" id="cb277"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sppos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate_all</a></span><span class="op">(</span><span class="va">data</span>, <span class="st">' '</span><span class="op">)</span>
<span class="va">sppos</span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]     5   5
## [2,]    32  32
## [3,]    36  36
## [4,]    40  40
## [5,]    42  42
## [6,]    51  51</code></pre>
<div class="sourceCode" id="cb279"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">data</span>, start<span class="op">=</span><span class="va">atpos</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span><span class="op">+</span><span class="fl">1</span>, end<span class="op">=</span><span class="va">sppos</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">]</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "uct.ac.za"</code></pre>
<p><code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate()</a></code> 함수를 사용해서 찾고자 하는 문자열의 시작 위치를 명세한다.
문자열 슬라이싱(slicing)할 때, 골뱅기 기호 뒤부터 빈 공백을 포함하지 않는 위치까지 문자열을 뽑아낸다.</p>
</div>
<div id="r-string-format" class="section level2" number="7.10">
<h2>
<span class="header-section-number">7.10</span> 서식 연산자<a class="anchor" aria-label="anchor" href="#r-string-format"><i class="fas fa-link"></i></a>
</h2>
<p><strong>서식 연산자(format operator)</strong> Base R의 <code><a href="https://rdrr.io/r/base/sprintf.html">sprintf()</a></code> 함수에 C언어 스타일로 <code>%</code>를 사용하기도 하지만
<a href="https://cran.r-project.org/web/packages/glue/index.html">glue: Interpreted String Literals</a> 팩키지도 최근에 많이 사용된다.
<code>glue</code> 팩키지 <code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code>는 문자열 일부를 변수에 저장된 값으로 바꿔 문자열을 구성한다.
정수에 서식 연산자가 적용될 때, {}는 나머지 연산자가 된다.
하지만 첫 피연산자가 문자열이면, {}은 서식 연산자가 된다.</p>
<p>첫 피연산자는 서식 문자열(format string)로 두번째 피연산자가 어떤 형식으로 표현되는지를 명세하는 하나 혹은 그 이상의 서식 순서(format sequence)를 담고 있다. 결과값은 문자열이다.</p>
<p>예를 들어, 형식 순서 ’%d’의 의미는 두번째 피연산자가 정수 형식으로 표현됨을 뜻한다. (d는 “decimal”을 나타낸다.)</p>
<div class="sourceCode" id="cb281"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">camels</span> <span class="op">&lt;-</span> <span class="fl">42</span>
<span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">'%d'</span>, <span class="va">camels</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "42"</code></pre>
<div class="sourceCode" id="cb283"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{camels}"</span><span class="op">)</span></code></pre></div>
<pre><code>## 42</code></pre>
<p>결과는 문자열 ’42’로 정수 42와 혼동하면 안 된다.</p>
<p>서식 순서는 문자열 어디에도 나타날 수 있어서 문장 중간에 값을 임베드(embed)할 수 있다.</p>
<div class="sourceCode" id="cb285"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">camels</span> <span class="op">&lt;-</span> <span class="fl">42</span>
<span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">'I have spotted %d camels.'</span>, <span class="va">camels</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "I have spotted 42 camels."</code></pre>
<div class="sourceCode" id="cb287"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">'I have spotted {camels} camels.'</span><span class="op">)</span></code></pre></div>
<pre><code>## I have spotted 42 camels.</code></pre>
<p>만약 문자열 서식 순서가 하나 이상이라면, 두번째 인자는 튜플(tuple)이 된다.
서식 순서 각각은 순서대로 튜플 요소와 매칭된다.</p>
<p>다음 예제는 정수 형식을 표현하기 위해서 ‘%d’, 부동 소수점 형식을 표현하기 위해서 ‘%g’,
문자열 형식을 표현하기 위해서 ‘%s’을 사용한 사례다.
여기서 왜 부동 소수점 형식이’%f’대신에 ’%g’인지는 질문하지 말아주세요.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="r-string.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> camels <span class="ot">&lt;-</span> <span class="dv">42</span></span>
<span id="cb289-2"><a href="r-string.html#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">glue</span>(<span class="st">'I have spotted {camels} camels.'</span>)</span>
<span id="cb289-3"><a href="r-string.html#cb289-3" aria-hidden="true" tabindex="-1"></a>I have spotted <span class="dv">42</span> camels.</span>
<span id="cb289-4"><a href="r-string.html#cb289-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sprintf</span>(<span class="st">'I have spotted %d camels &amp; %d camels'</span>, camels)</span>
<span id="cb289-5"><a href="r-string.html#cb289-5" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">sprintf</span>(<span class="st">"I have spotted %d camels &amp; %d camels"</span>, camels) <span class="sc">:</span> </span>
<span id="cb289-6"><a href="r-string.html#cb289-6" aria-hidden="true" tabindex="-1"></a>  too few arguments</span>
<span id="cb289-7"><a href="r-string.html#cb289-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> camels <span class="ot">&lt;-</span> <span class="st">"king"</span></span>
<span id="cb289-8"><a href="r-string.html#cb289-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sprintf</span>(<span class="st">'I have spotted %d camels.'</span>, camels)</span>
<span id="cb289-9"><a href="r-string.html#cb289-9" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">sprintf</span>(<span class="st">"I have spotted %d camels."</span>, camels) <span class="sc">:</span> </span>
<span id="cb289-10"><a href="r-string.html#cb289-10" aria-hidden="true" tabindex="-1"></a>  invalid format <span class="st">'%d'</span>; use format %s <span class="cf">for</span> character objects</span></code></pre></div>
<p>문자열 서식 순서와 갯수는 일치해야 하고, 요소의 자료형(type)도 서식 순서와 일치해야 한다.</p>
<p>상기 첫 예제는 충분한 요소 개수가 되지 않고, 두 번째 예제는 자료형이 맞지 않는다.
서식 연산자는 강력하지만, 사용하기가 까다로운 점이 있으니, <code>glue</code>를 사용하는 것도 권장된다.</p>
</div>
<div id="r-string-debug" class="section level2" number="7.11">
<h2>
<span class="header-section-number">7.11</span> 디버깅<a class="anchor" aria-label="anchor" href="#r-string-debug"><i class="fas fa-link"></i></a>
</h2>
<p>프로그램을 작성하면서 배양해야 하는 기술은 항상 자신에게 질문을 하는 것이다.
“여기서 무엇이 잘못 될 수 있을까?” 혹은 “내가 작성한 완벽한 프로그램을 망가뜨리기 위해 사용자는 무슨 엄청난 일을 할 것인가?”</p>
<p>예를 들어 앞장의 반복 while 루프를 시연하기 위해 사용한 프로그램을 살펴봅시다.</p>
<div class="sourceCode" id="cb290"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">while</span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">line</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readline.html">readline</a></span><span class="op">(</span>prompt <span class="op">=</span> <span class="st">'&gt; '</span><span class="op">)</span>
  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">line</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span> <span class="op">==</span> <span class="st">"#"</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">next</span>
  <span class="op">}</span>
  <span class="kw">if</span><span class="op">(</span><span class="va">line</span> <span class="op">==</span> <span class="st">'done'</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw">break</span>
  <span class="op">}</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">line</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>사용자가 입력값으로 빈 공백 줄을 입력하게 될 때 무엇이 발생하는지 살펴봅시다.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="r-string.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> hello there</span>
<span id="cb291-2"><a href="r-string.html#cb291-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] hello there</span>
<span id="cb291-3"><a href="r-string.html#cb291-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="co"># don't print this</span></span>
<span id="cb291-4"><a href="r-string.html#cb291-4" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> print this<span class="sc">!</span></span>
<span id="cb291-5"><a href="r-string.html#cb291-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] print this<span class="sc">!</span></span>
<span id="cb291-6"><a href="r-string.html#cb291-6" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> </span>
<span id="cb291-7"><a href="r-string.html#cb291-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">""</span></span>
<span id="cb291-8"><a href="r-string.html#cb291-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> done</span></code></pre></div>
<p>빈 공백줄이 입력될 때까지 코드는 잘 작동합니다.
그리고 나서, 파이썬의 경우 0 번째 문자가 없어서 트레이스백(traceback)이 발생한다.
R의 경우 정상 실행되지만 원하는 바는 아니다.
입력줄이 비어있을 때, 코드 3번째 줄을 “안전”하게 만드는 두 가지 방법이 있다.</p>
<p>하나는 빈 문자열이면 거짓(FALSE)을 반환하도록 <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code> 함수를 사용하는 것이다.</p>
<p><code>if(str_detect(line, '^#'))</code></p>
<p><strong>가디언 패턴(guardian pattern)</strong>을 사용한 <code>if</code>문으로 문자열에 적어도 하나의 문자가 있는 경우만 두번째 논리 표현식이 평가되도록 코드를 작성한다.</p>
<p><code>if(str_length(line) &gt; 0 &amp; str_detect(line, '^#'))</code></p>
</div>
<div id="r-string-terminology" class="section level2" number="7.12">
<h2>
<span class="header-section-number">7.12</span> 용어정의<a class="anchor" aria-label="anchor" href="#r-string-terminology"><i class="fas fa-link"></i></a>
</h2>
<p><strong>계수기(counter)</strong>: 무언가를 계수하기 위해서 사용되는 변수로 일반적으로 0 으로 초기화하고 나서 증가한다.
<strong>빈 문자열(empty string)</strong>: 두 인용부호로 표현되고, 어떤 문자도 없고 길이가 0 인 문자열.
<strong>서식 연산자(format operator)</strong>: 서식 문자열과 튜플을 받아, 서식 문자열에 지정된 서식으로 튜플 요소를 포함하는 문자열을 생성하는 연산자, .
<strong>서식 순서(format sequence)</strong>: d처럼 어떤 값의 서식으로 표현되어야 하는지를 명세하는 “서식 문자열” 문자 순서.
<strong>서식 문자열(format string)</strong>: 서식 순서를 포함하는 서식 연산자와 함께 사용되는 문자열.
<strong>플래그(flag)</strong>: 조건이 참인지를 표기하기 위해 사용하는 불 변수(boolean variable)
<strong>호출(invocation)</strong>: 메쏘드를 호출하는 명령문.
<strong>불변(immutable)</strong>: 순서의 항목에 대입할 수 없는 특성.
<strong>인덱스(index)</strong>: 문자열의 문자처럼 순서(sequence)에 항목을 선택하기 위해 사용되는 정수 값.
<strong>항목(item)</strong>: 순서에 있는 값의 하나.
<strong>메쏘드(method)</strong>: 객체와 연관되어 점 표기법을 사용하여 호출되는 함수.
<strong>객체(object)</strong>: 변수가 참조하는 무엇. 지금은 “객체”와 “값”을 구별없이 사용한다.
<strong>검색(search)</strong>: 찾고자 하는 것을 찾았을 때 멈추는 운행법 패턴.
<strong>순서(sequence)</strong>: 정돈된 집합. 즉, 정수 인텍스로 각각의 값이 확인되는 값의 집합.
<strong>슬라이스(slice)</strong>: 인텍스 범위로 지정되는 문자열 부분.
<strong>운행법(traverse)</strong>: 순서(sequence)의 항목을 반복적으로 훑기, 각각에 대해서는 동일한 연산을 수행.</p>
</div>
<div id="r-string-ex" class="section level2" number="7.13">
<h2>
<span class="header-section-number">7.13</span> 연습문제<a class="anchor" aria-label="anchor" href="#r-string-ex"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>다음 문자열에서 숫자를 뽑아내는 R 코드로 작성하세요.</li>
</ol>
<p><code>str &lt;- 'X-DSPAM-Confidence: 0.8475'</code></p>
<p><code><a href="https://stringr.tidyverse.org/reference/str_locate.html">str_locate()</a></code> 함수와 문자열 슬라이싱을 사용하여 <code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code> 문자 뒤 문자열을 뽑아내고
<code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> 함수를 사용하여 뽑아낸 문자열을 부동 소수점 숫자로 변환하세요.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="r-iter.html"><span class="header-section-number">6</span> 반복(Iteration)</a></div>
<div class="next"><a href="r-file.html"><span class="header-section-number">8</span> 파일</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-string"><span class="header-section-number">7</span> 문자열</a></li>
<li><a class="nav-link" href="#r-string-sequence"><span class="header-section-number">7.1</span> 문자열은 순열이다.</a></li>
<li><a class="nav-link" href="#r-string-length"><span class="header-section-number">7.2</span> length() 함수 사용 문자열 길이</a></li>
<li><a class="nav-link" href="#r-string-traversal"><span class="header-section-number">7.3</span> 루프를 사용한 문자열 순회</a></li>
<li><a class="nav-link" href="#r-string-slice"><span class="header-section-number">7.4</span> 문자열 슬라이스</a></li>
<li><a class="nav-link" href="#r-string-count"><span class="header-section-number">7.5</span> 루프 돌기 계수</a></li>
<li><a class="nav-link" href="#r-string-in-operator"><span class="header-section-number">7.6</span> %in% 연산자</a></li>
<li><a class="nav-link" href="#r-string-comparison-operator"><span class="header-section-number">7.7</span> 문자열 비교</a></li>
<li><a class="nav-link" href="#r-string-method"><span class="header-section-number">7.8</span> 문자열 함수</a></li>
<li><a class="nav-link" href="#r-string-parsing"><span class="header-section-number">7.9</span> 문자열 파싱</a></li>
<li><a class="nav-link" href="#r-string-format"><span class="header-section-number">7.10</span> 서식 연산자</a></li>
<li><a class="nav-link" href="#r-string-debug"><span class="header-section-number">7.11</span> 디버깅</a></li>
<li><a class="nav-link" href="#r-string-terminology"><span class="header-section-number">7.12</span> 용어정의</a></li>
<li><a class="nav-link" href="#r-string-ex"><span class="header-section-number">7.13</span> 연습문제</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>데이터 과학 프로그래밍</strong>" was written by 한국 알(R) 사용자회. It was last built on 2022-05-17.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
